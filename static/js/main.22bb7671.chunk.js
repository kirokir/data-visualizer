(this["webpackJsonprawgraphs-frontend"]=this["webpackJsonprawgraphs-frontend"]||[]).push([[0],{142:function(e,t,a){e.exports={thumbnail:"ChartSelector_thumbnail__1xQ_-",currentChart:"ChartSelector_currentChart__NKILM",disabled:"ChartSelector_disabled__MRXKu"}},159:function(e,t,a){e.exports={parsingOptions:"ParsingOptions_parsingOptions__K4kyV","refresh-button":"ParsingOptions_refresh-button__3TkLa","separator-preview":"ParsingOptions_separator-preview__1UuQv"}},166:function(e,t,a){e.exports={dropzone:"LoadProject_dropzone__6a5Ft",reject:"LoadProject_reject__1NjN5",accept:"LoadProject_accept__1a3qM","browse-button":"LoadProject_browse-button__Kvg8t"}},167:function(e,t,a){e.exports={dropzone:"UploadFile_dropzone__1h-vB",reject:"UploadFile_reject__2Kpgt",accept:"UploadFile_accept__3mK1X","browse-button":"UploadFile_browse-button__2AUZ1"}},168:function(e,t,a){e.exports={swatch:"InlineColorPicker_swatch__11WDP",color:"InlineColorPicker_color__12j-E",popover:"InlineColorPicker_popover__3Hchl",cover:"InlineColorPicker_cover__2KTIs"}},237:function(e,t,a){e.exports={footer:"Footer_footer__7dIj9","main-credit":"Footer_main-credit__3IjEE",attribution:"Footer_attribution__16IXA"}},238:function(e,t,a){e.exports={"url-input":"SparqlFetch_url-input__1OTEr","query-input-here":"SparqlFetch_query-input-here__1GTNa","base-iri-input-here":"SparqlFetch_base-iri-input-here__1MbOa"}},39:function(e,t,a){e.exports={"chart-options":"ChartOptions_chart-options__3l80N","chart-option":"ChartOptions_chart-option__AxfdW","color-swatch":"ChartOptions_color-swatch__2yOSf","color-scale-item":"ChartOptions_color-scale-item__3Rhfd",ordinal:"ChartOptions_ordinal__2mFUI","not-ordinal":"ChartOptions_not-ordinal__3DrFs","color-swatches-list":"ChartOptions_color-swatches-list__2EQnZ","options-group":"ChartOptions_options-group__3Zauh","group-header":"ChartOptions_group-header__1X0bJ",collapsed:"ChartOptions_collapsed__pl7d6","collapse-button":"ChartOptions_collapse-button__rUqFX","color-scheme-dropdown-item":"ChartOptions_color-scheme-dropdown-item__1zRUD","scheme-preview":"ChartOptions_scheme-preview__f1lz2"}},41:function(e,t,a){e.exports={"column-card":"DataMapping_column-card__2VBWp","column-title":"DataMapping_column-title__2yLXi","data-type-icon":"DataMapping_data-type-icon__fdfcN","chart-dimension":"DataMapping_chart-dimension__2tNga","chart-dimension-header":"DataMapping_chart-dimension-header__3FrwJ","accepted-type-icon":"DataMapping_accepted-type-icon__3XRr1","dimension-required":"DataMapping_dimension-required__1FreW","assigned-column":"DataMapping_assigned-column__3S8Vu","column-valid":"DataMapping_column-valid__1wlKa","column-invalid":"DataMapping_column-invalid__3g-BT","remove-assigned":"DataMapping_remove-assigned__3VE_f",dropzone:"DataMapping_dropzone__2L06t",active:"DataMapping_active__NdQHM"}},42:function(e,t,a){e.exports={"data-type-selector":"DataGrid_data-type-selector__2on-B","data-type-selector-item":"DataGrid_data-type-selector-item__3xB1K",selected:"DataGrid_selected__iVbJn","date-format-preview":"DataGrid_date-format-preview__f5V3s","data-type-selector-trigger":"DataGrid_data-type-selector-trigger__1yAyi","date-format-selector":"DataGrid_date-format-selector__19SHO","date-format-selector-entry":"DataGrid_date-format-selector-entry__3kPs-","parent-type-selector":"DataGrid_parent-type-selector__8RCk2","column-name":"DataGrid_column-name__q_QPq","has-error":"DataGrid_has-error__jgPR1","raw-col-header":"DataGrid_raw-col-header__2fXsy",unsorted:"DataGrid_unsorted__2dx3u",acs:"DataGrid_acs__-kgxx",desc:"DataGrid_desc__2WpaO"}},426:function(e,t){},428:function(e,t,a){e.exports={navbar:"Header_navbar__359Kr"}},429:function(e,t,a){e.exports={section:"Section_section__2mYr1"}},463:function(e,t,a){e.exports={"dataset-source":"DataSamples_dataset-source__1NwGz"}},464:function(e,t,a){e.exports={"url-input":"UrlFetch_url-input__3vKK2"}},472:function(e,t,a){e.exports={"copy-to-clipboard-button":"style_copy-to-clipboard-button__29IxT"}},510:function(e,t,a){},516:function(e,t,a){},534:function(e,t){},536:function(e,t){},545:function(e,t){},547:function(e,t){},565:function(e,t){},566:function(e,t){},57:function(e,t,a){e.exports={"loading-option":"DataLoader_loading-option__Spa1h",disabled:"DataLoader_disabled__3RVvn",active:"DataLoader_active__-mHU8","start-over":"DataLoader_start-over__3fWNA",cancel:"DataLoader_cancel__22q8c","loading-component":"DataLoader_loading-component__1zOap","bg-animated":"DataLoader_bg-animated__1j4Qa","bg-animation":"DataLoader_bg-animation__12elS"}},570:function(e,t){},571:function(e,t){},64:function(e,t,a){e.exports={loadingOption:"CustomChartLoader_loadingOption__1vYQM",disabled:"CustomChartLoader_disabled__1vBSV",active:"CustomChartLoader_active__2XtZG",dropzone:"CustomChartLoader_dropzone__S5GVb",dropin:"CustomChartLoader_dropin__1VOM0",reject:"CustomChartLoader_reject__8aMxD",accept:"CustomChartLoader_accept__J_4Ap","browse-button":"CustomChartLoader_browse-button__ZAvJI"}},962:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(53),s=a.n(c),o=(a(510),a(6)),i=a(9),l=a.n(i),u=a(20),d=a(5),p=a(7),j=[{label:"Home",slug:"home",href:"https://dear.is-a.dev"}],b=a(428),m=a.n(b),h=a(1035),O=a(1033),f=a(2);function g(e){var t=e.menuItems;return Object(f.jsxs)(h.a,{bg:"transparent",sticky:"top",className:m.a.navbar,children:[Object(f.jsx)(h.a.Brand,{href:"/",children:Object(f.jsx)("b",{children:"Graphon"})}),Object(f.jsx)(O.a,{className:"ml-auto",children:t.map((function(e,t){return Object(f.jsx)(O.a.Link,{href:e.href,children:e.label},"item"+t)}))})]})}var v=a(429),x=a.n(v),w=a(1020),y=a(1021),C=a(430),k=a(1022);function N(e){return Object(f.jsx)(w.a,{fluid:!0,className:[x.a.section,e.className].join(" "),children:Object(f.jsx)(y.a,{children:Object(f.jsxs)(C.a,{children:[Object(f.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(f.jsx)("h1",{children:e.title}),e.loading&&Object(f.jsx)(k.a,{animation:"border",variant:"primary",style:{width:"2rem",height:"2rem",borderWidth:"2px",marginLeft:"2rem"}})]}),e.children]})})})}var _=a(237),S=a.n(_),D=a(431);function L(e){return Object(f.jsx)(w.a,{fluid:!0,style:{backgroundColor:"var(--dark)"},children:Object(f.jsx)(w.a,{className:S.a.footer,children:Object(f.jsx)(y.a,{className:"justify-content-center",children:Object(f.jsxs)(C.a,{xs:12,md:10,className:"text-center",children:[Object(f.jsxs)("p",{className:S.a["main-credit"],children:["Made with ",Object(f.jsx)(D.a,{color:"red"})," by"," ",Object(f.jsx)("a",{href:"https://dear.is-a.dev/",target:"_blank",rel:"noopener noreferrer",children:"dear"})]}),Object(f.jsxs)("p",{className:S.a.attribution,children:["Based on the open-source project"," ",Object(f.jsx)("a",{href:"https://github.com/rawgraphs/rawgraphs-app",target:"_blank",rel:"noopener noreferrer",children:"RAWGraphs"}),". Original work \xa9 2013-2021 (Apache License 2.0)."]})]})})})})}var R=a(1029),T=a(432),A=a(23);var F,P,M=function(){var e=function(){var e=Object(r.useState)({width:void 0,height:void 0}),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),t=Object(r.useState)(e.width<992),a=Object(d.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),o=Object(d.a)(s,2),i=o[0],l=o[1],u=function(){c(!1),l(!0)};return Object(r.useEffect)((function(){!1===i&&c(e.width<992)}),[i,e]),Object(f.jsxs)(R.a,{className:"raw-modal",show:n,onHide:u,backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(f.jsx)(R.a.Header,{closeButton:!0,children:Object(f.jsxs)(R.a.Title,{as:"h5",children:[Object(f.jsx)("span",{role:"img","aria-label":"Party icon",children:"\ud83c\udf89"})," ","Welcome to Graphon!"]})}),Object(f.jsxs)(R.a.Body,{children:[Object(f.jsxs)("p",{className:"big",children:["Graphon is designed for ",e.width>=768?"slightly ":" ","bigger screens!"]}),Object(f.jsxs)("p",{children:["Resize your browser window or"," ",Object(f.jsxs)("a",{href:"mailto:?subject=Visit+Graphon&body=Hello%21%0D%0APlease+do+not+forget+to+take+a+look+at+the+new+version+of+Graphon%21%0D%0A%0D%0AVisit%3A+https%3A%2F%2Fyour-app-url.com%2F%0D%0A%0D%0ASee+you+later",children:[Object(f.jsx)(A.g,{})," send yourself a reminder"]})," ","to come back at a better time."]}),Object(f.jsx)("p",{children:"Touch devices are not fully supported yet."})]}),Object(f.jsx)(R.a.Footer,{children:Object(f.jsx)(T.a,{variant:"primary",onClick:u,children:"Got it!"})})]})},E=a(34),U=a(433),I=a(434),q=a(435),B=a(436),V=a(437),z=a(438),G=a(439),W=a(440),H=a(441),J=a(442),K=a(443),Y=a(444),X=a(445),Q=a(446),Z=a(447),$=a(448),ee=a(449),te=a(450),ae=a(451),re=a(452),ne=a(453),ce=a(454),se=a(455),oe=a(456),ie=a(457),le=a(458),ue=a(459),de=a(460),pe=a(461),je=a(462),be=A.e,me=A.l,he=A.q,Oe={date:be,number:me,string:he},fe={"ar-EG":U,"ca-ES":I,"cs-CZ":q,"da-DK":B,"de-CH":V,"de-DE":z,"en-CA":G,"en-GB":W,"en-US":H,"es-ES":J,"es-MX":K,"fa-IR":Y,"fi-FI":X,"fr-CA":Q,"fr-FR":Z,"he-IL":$,"hu-HU":ee,"it-IT":te,"ja-JP":ae,"ko-KR":re,"mk-MK":ne,"nb-NO":ce,"nl-NL":se,"pl-PL":oe,"pt-BR":ie,"ru-RU":le,"sv-SE":ue,"uk-UA":de,"zh-CN":pe,"zh-TW":je},ge={"\\t":"Tab",";":"Semicolon",",":"Comma","|":"Pipe"},ve=Object.keys(ge),xe={count:"Count",mean:"Average",median:"Median",max:"Max",min:"Min",countDistinct:"Count unique",sum:"Sum",csv:"CSV",csvDistinct:"CSV (unique)"},we={sequential:"Sequential",diverging:"Diverging",ordinal:"Ordinal"},ye={interpolateBlues:"Blue sequential",interpolateGreens:"Green sequential",interpolateReds:"Red sequential",interpolateRdBu:"RdBu diverging",interpolateBrBG:"BrBG diverging",interpolatePiYG:"PiYG diverging",schemeCategory10:"Categorical 10",interpolateTurbo:"Turbo discrete",interpolateSpectral:"Spectral discrete"},Ce=a(309),ke=function(){return new Worker(a.p+"static/js/worker.0db894ce.worker.js")};var Ne=a(4),_e=a(3);var Se=Symbol("RawgraphsSparqlMarker");var De=[{dataType:"sparql",parse:function(e,t){if(!0===e[Se])return[e,{}];throw new Error("Not a sparql result")}},{dataType:"json",parse:function(e){var t=e.trim().replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm,"");return[JSON.parse(t),{}]}},{dataType:"csv",parse:function(e,t){var a=e.trim().replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm,"");if(t.separator)return[Object(_e.dsvFormat)(t.separator).parse(a),{separator:t.separator}];var r,n=[],c=Object(Ne.a)(ve);try{for(c.s();!(r=c.n()).done;){var s=r.value.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");try{var o=Object(_e.dsvFormat)(s).parse(a);(o.length>0&&Object.keys(o[0]).length>1||","===s)&&n.push({separator:s,score:Object.keys(o[0]).length,parsed:o})}catch(i){}}}catch(l){c.e(l)}finally{c.f()}return n.sort((function(e,t){return t.score-e.score})),[n[0].parsed,{separator:n[0].separator}]}}];function Le(e,t){var a=function(e,t){var a,r=Object(Ne.a)(De);try{for(r.s();!(a=r.n()).done;){var n=a.value;try{var c=n.parse(e,t),s=Object(d.a)(c,2),o=s[0],i=s[1];return[n.dataType,o,i]}catch(l){}}}catch(u){r.e(u)}finally{r.f()}return[null,null]}(e,t),r=Object(d.a)(a,3),n=r[0],c=r[1],s=r[2];return null===n?[n,c,"Cannot parse dataset! (This should never happen)",{}]:"json"===n?["json",c,null,s]:c.length>0?[n,c,null,s]:[null,null,"We can't parse your data.",{}]}function Re(e){return["string","number","boolean"].includes(typeof e)}var Te=a(16);function Ae(e,t){return Object(E.flatMap)(e,(function(e){var a=e[t],r=Object(E.omit)(e,t);return Object(E.map)(r,(function(e,r){var n;return n={},Object(Te.a)(n,t,a),Object(Te.a)(n,"column",r),Object(Te.a)(n,"value",e),n}))}))}var Fe="direct",Pe="replace",Me={};function Ee(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),s=Object(d.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)(null),j=Object(d.a)(u,2),b=j[0],m=j[1],h=Object(r.useState)(null),O=Object(d.a)(h,2),f=O[0],g=O[1],v=Object(r.useState)(null),x=Object(d.a)(v,2),w=x[0],y=x[1],C=Object(r.useState)([null,null]),k=Object(d.a)(C,2),N=k[0],_=k[1],S=Object(r.useState)(","),D=Object(d.a)(S,2),L=D[0],R=D[1],T=Object(r.useState)(","),A=Object(d.a)(T,2),P=A[0],M=A[1],U=Object(r.useState)("."),I=Object(d.a)(U,2),q=I[0],B=I[1],V=Object(r.useState)(navigator.language||"en-US"),z=Object(d.a)(V,2),G=z[0],W=z[1],H=Object(r.useState)(),J=Object(d.a)(H,2),K=J[0],Y=J[1],X=Object(r.useState)(null),Q=Object(d.a)(X,2),Z=Q[0],$=Q[1],ee=Object(d.a)(N,2),te=ee[0],ae=ee[1],re=Object(r.useState)(!1),ne=Object(d.a)(re,2),ce=ne[0],se=ne[1],oe=Object(r.useState)(Fe),ie=Object(d.a)(oe,2),le=ie[0],ue=ie[1],de=Object(r.useState)(void 0),pe=Object(d.a)(de,2),je=pe[0],be=pe[1],me=null!==ae&&void 0!==ae?ae:null===Z||void 0===Z?void 0:Z.dataTypes,he=Object(r.useCallback)((function(e,t,a){return se(!0),function(e,t,a){return F||(F=new ke),Ce.a(F).parseDataset(e,t,a)}(e,t,Object(o.a)(Object(o.a)({},a),{},{dateLocale:Object(E.get)(fe,a.locale)})).then((function(e){return e})).catch((function(e){console.log("eee",e)})).finally((function(){se(!1)}))}),[se]),Oe=Object(r.useCallback)((function(e,t,a){return se(!0),new Promise((function(r,n){try{r(Object(p.parseDataset)(e,t,Object(o.a)(Object(o.a)({},a),{},{dateLocale:Object(E.get)(fe,a.locale)})))}catch(c){n(c)}finally{se(!1)}}))}),[se]),ge=Object(r.useCallback)((function(e,t,a){return he(e,t,a)}),[he,Oe]),ve=Object(r.useCallback)((function(e,t,a){return ge(e,t,a).then((function(e){return $(e)}))}),[ge]),xe=Object(r.useCallback)((function(){$(null),m(null),g(null),n(""),l(null),y(null),Y(null),_([null,null])}),[]),we=Object(r.useCallback)((function(e){var t=e.userInput,a=e.userData,r=e.userDataType,c=e.parseError,s=e.unstackedColumns,o=e.unstackedData,i=e.dataTypes,u=e.separator,d=e.thousandsSeparator,p=e.decimalsSeparator,j=e.locale,b=e.stackDimension,h=e.dataSource;n(t),g(r),R(u),M(d),B(p),W(j),Y(b),l(h),m(a),y(c),_([o,s]),ve(a,i,{thousandsSeparator:d,decimalsSeparator:p,locale:j})}),[ve]),ye=Object(r.useCallback)((function(e){ge(e,void 0,{locale:G,decimal:q,group:P}).then((function(t){if(t.errors.length>0)Me.replacedData=t,be("parse-error");else{var a=Object.keys(me),r=Object.keys(t.dataTypes),n=Object(E.difference)(a,r);if(n.length>0)Me.replacedData=t,be("missing-column:"+n[0]);else{var c=Object(o.a)(Object(o.a)({},t.dataTypes),me);ge(e,c,{locale:G,decimal:q,group:P}).then((function(a){if(a.errors.length>0)Me.replacedData=t,be("type-mismatch");else if(K){_([e,a.dataTypes]);var r=Ae(e,K);m(r),ge(r,Z.dataTypes,{locale:G,decimal:q,group:P}).then((function(e){return $(e)}))}else $(a)}))}}}))}),[me,Z,q,G,ge,K,P]),Ne=Object(r.useCallback)((function(e){m(e),le===Fe?ve(e,void 0,{locale:G,decimal:q,group:P}):le===Pe?ye(e):console.error("Unknown data loader mode!")}),[q,ye,G,le,ve,P]);function _e(e,t,a){var r,c=Le(e,{separator:Object(E.get)(a,"separator",null)}),s=Object(d.a)(c,4),o=s[0],u=s[1],p=s[2],j=s[3];n(e),l(t),g(o),y(p),j&&"object"===typeof j&&"separator"in j&&R(j.separator),"json"===o||p||Ne(u);var b=null!==(r=null===i||void 0===i?void 0:i.jsonPath)&&void 0!==r?r:void 0;if("json"===o&&!p&&void 0!==b){var m=Object(E.get)(u,b,null);Array.isArray(m)&&Ne(m)}}var Se=Object(r.useCallback)((function(e,t){var a=e.map((function(e){var t=e;if(Array.isArray(t)){var a={};t.forEach((function(e,t){a["Column ".concat(t+1)]=e})),t=a}(Re(t)||null===t)&&(t={value:t});var r={};for(var n in t){var c=t[n],s=typeof c;if(Array.isArray(c))r[n]=c.filter(Re).join(" ");else if("object"===s&&null!==s)for(var o in c){var i=c[o];Re(i)&&(r["".concat(n,".").concat(o)]=i)}else Re(c)&&(r[n]=c)}return r})).filter((function(e){return null!==e}));m(a),l(Object(o.a)(Object(o.a)({},i),{},{jsonPath:t})),Ne(a)}),[i,Ne]);var De=Object(r.useCallback)((function(){ue(Pe),Me.userInput=a,Me.userDataType=f,Me.dataSource=i,Me.userData=b,n(null),g(null),l(null),m(null)}),[i,b,f,a]),Te=Object(r.useCallback)((function(){be(!1),ue(Fe),n(Me.userInput),g(Me.userDataType),l(Me.dataSource),m(Me.userData)}),[]),Ee=Object(r.useCallback)((function(){be(!1),$(Me.replacedData),y(null),Y(null),_([null,null])}),[]);return{userInput:a,setUserInput:_e,userData:b,userDataType:f,parseError:w,unstackedData:te,unstackedColumns:ae,separator:L,setSeparator:function(e){var t=Le(a,{separator:e}),r=Object(d.a)(t,3),n=r[0],c=r[1],s=r[2];R(e),g(n),y(s),"json"!==n&&!s&&e&&(m(c),ve(c,void 0,{locale:G,decimal:q,group:P}))},thousandsSeparator:P,setThousandsSeparator:function(e){var t=Le(a,{separator:L}),r=Object(d.a)(t,3),n=r[0],c=r[1],s=r[2];M(e),g(n),y(s),"json"===n||s||(m(c),ve(c,void 0,{locale:G,decimal:q,group:e}))},decimalsSeparator:q,setDecimalsSeparator:function(e){var t=Le(a,{separator:L}),r=Object(d.a)(t,3),n=r[0],c=r[1],s=r[2];B(e),g(n),y(s),"json"===n||s||(m(c),se(!0),ve(c,void 0,{locale:G,decimal:e,group:P}))},locale:G,setLocale:function(e){Z&&(ve(Z.dataset,Z.dataTypes,{locale:e,decimal:q,group:P}),W(e))},stackDimension:K,dataSource:i,data:Z,loading:ce,coerceTypes:function(e){ve(b,e,{locale:G,decimal:q,group:P})},loadSample:function(e,t){R(t),_e(e,{type:"sample"},{separator:t})},handleInlineEdit:function(e){m(e),ve(e,Z.dataTypes,{locale:G,decimal:q,group:P})},handleStackOperation:function(e){if(Y(e),null!==e){null===te&&_([b,Z.dataTypes]);var t=Ae(te||b,e);m(t),ve(t,void 0,{locale:G,decimal:q,group:P})}else m(te),ve(te,ae,{locale:G,decimal:q,group:P}),_([null,null])},setJsonData:Se,resetDataLoader:xe,hydrateFromSavedProject:we,dataLoaderMode:le,startDataReplace:De,cancelDataReplace:Te,commitDataReplace:Ee,replaceRequiresConfirmation:je}}var Ue=a(18),Ie=a(26),qe=a(1030),Be=a(482),Ve=a(1036),ze=a(8),Ge=a.n(ze),We=a(42),He=a.n(We),Je=["currentFormat","onChange","className"],Ke=["placement","scheduleUpdate","arrowProps","outOfBoundaries","show"],Ye=["ref"],Xe=Object.keys(p.dateFormats),Qe=n.a.forwardRef((function(e,t){var a=e.currentFormat,r=e.onChange,n=e.className,c=Object(Ie.a)(e,Je);return Object(f.jsx)("div",Object(o.a)(Object(o.a)({className:Ge()(n,He.a["date-format-selector"]),ref:t},c),{},{children:Xe.map((function(e){return Object(f.jsx)("div",{className:Ge()(He.a["date-format-selector-entry"],Object(Te.a)({},He.a.selected,Object(E.get)(a,"dateFormat","")===e)),onClick:function(t){t.stopPropagation(),t.preventDefault(),r&&r({type:"date",dateFormat:e})},children:e},e)}))}))}));function Ze(e){var t=e.currentType,a=e.onTypeChange,n=e.currentTypeComplete,c=Object(r.useRef)(null),s=Object(r.useState)(!1),i=Object(d.a)(s,2),l=i[0],u=i[1],p=Object(E.get)(t,"type",t),j=Object(r.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var r=e.target.dataset.datatype;"function"!==typeof a||Object(E.isEqual)(r,t)||a(r),u(!1)}),[t,a]),b=Object(r.useCallback)((function(e){"function"!==typeof a||Object(E.isEqual)(e,t)||a(e),u(!1)}),[t,a]),m=Object(r.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),u(!l)}),[l]),h=Oe[p];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{role:"button",className:He.a["data-type-selector-trigger"],ref:c,onClick:m,children:Object(f.jsx)(h,{})}),Object(f.jsx)(Be.a,{target:c.current,show:l,placement:"bottom-start",rootClose:!0,rootCloseEvent:"click",onHide:function(){u(!1)},container:document.body,children:function(e){e.placement,e.scheduleUpdate,e.arrowProps,e.outOfBoundaries,e.show;var a=Object(Ie.a)(e,Ke);return Object(f.jsxs)("div",Object(o.a)(Object(o.a)({id:"data-type-selector",className:He.a["data-type-selector"],onClick:function(e){return e.stopPropagation()}},a),{},{children:[Object(f.jsxs)("div",{"data-datatype":"number",onClick:j,className:Ge()(He.a["data-type-selector-item"],Object(Te.a)({},He.a.selected,"number"===p)),children:[Object(f.jsx)(me,{})," Number"]}),Object(f.jsx)(Ve.a,{placement:"right-start",overlay:Object(f.jsx)(Qe,{currentType:t,onChange:b}),trigger:"click",children:function(e){var t=e.ref,a=Object(Ie.a)(e,Ye);return Object(f.jsxs)("div",Object(o.a)(Object(o.a)({ref:t,"data-datatype":"date"},a),{},{className:Ge()(He.a["data-type-selector-item"],He.a["parent-type-selector"],Object(Te.a)({},He.a.selected,"date"===p)),children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(be,{}),"Date","date"===p&&Object(f.jsx)("span",{className:He.a["date-format-preview"],children:" ("+n.dateFormat+")  "})]}),Object(f.jsx)(A.h,{style:{marginRight:0,fill:"var(--gray-700)"}})]}))}}),Object(f.jsxs)("div",{"data-datatype":"string",onClick:j,className:Ge()(He.a["data-type-selector-item"],Object(Te.a)({},He.a.selected,"string"===p)),children:[Object(f.jsx)(he,{})," String"]})]}))}})]})}function $e(e){var t=Object.assign({},e).column,a=t.key,r=t.sortColumn,n=t.sortDirection;return Object(f.jsxs)("div",{className:Ge()(Object(Te.a)({},He.a["raw-col-header"],!0),Object(Te.a)({},He.a.unsorted,a!==r||a===r&&"NONE"===n),Object(Te.a)({},He.a.acs,a===r&&"ASC"===n),Object(Te.a)({},He.a.desc,a===r&&"DESC"===n)),children:[Object(f.jsx)(Ze,{currentType:t._raw_datatype,onTypeChange:t._raw_coerceType,currentTypeComplete:t._raw_datatype}),Object(f.jsx)("span",{className:Ge()(He.a["column-name"],"text-truncate","d-block"),title:t.name,children:t.name})]})}function et(e){var t,a=e.userDataset,n=e.dataset,c=e.errors,s=e.dataTypes,i=e.coerceTypes,l=e.onDataUpdate,u=Object(r.useState)(["id","NONE"]),j=Object(d.a)(u,2),b=Object(d.a)(j[0],2),m=b[0],h=b[1],O=j[1],g=Object(r.useMemo)((function(){return Object(E.keyBy)(c,"row")}),[c]),v=Object(r.useRef)(),x=24+8*(Math.floor(Math.log10(a.length))+1),w=((null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect().width)-x-1)/Object.keys(s).length,y=w?Math.max(w,170):170,C=Object(r.useMemo)((function(){return a&&s?[{key:"_id",name:"",headerRenderer:function(){return null},frozen:!0,width:x,sortable:!0}].concat(Object(Ue.a)(Object.keys(s).map((function(e,t){return{key:e,name:e,sortColumn:m,sortDirection:h,headerRenderer:$e,editable:!0,formatter:function(t){var a,r,n=t.row;return Object(f.jsx)("div",{className:Ge()(Object(Te.a)({},He.a["has-error"],null===n||void 0===n||null===(a=n._errors)||void 0===a?void 0:a[e])),children:null===(r=n[e])||void 0===r?void 0:r.toString()})},_raw_datatype:s[e],_raw_coerceType:function(t){return i(Object(o.a)(Object(o.a)({},s),{},Object(Te.a)({},e,t)))},sortable:!0,resizable:!0,width:y}})))):[]}),[i,s,a,x,y,m,h]),k=Object(r.useMemo)((function(){var e=a.map((function(e,t){var a;return Object(o.a)(Object(o.a)({},e),{},{_id:t+1,_stage3:n[t],_errors:null===(a=g[t])||void 0===a?void 0:a.error})}));if("NONE"===h)return e;var t=Object(p.getTypeName)(s[m]);if("number"===t)e=e.sort((function(e,t){return e._stage3[m]-t._stage3[m]}));else if("date"===t){var r;e=null!==(r=e.sort((function(e,t){var a,r,n;return null!==(a=null===(r=e._stage3[m])||void 0===r?void 0:r.valueOf())&&void 0!==a?a:0-(null===(n=t._stage3[m])||void 0===n?void 0:n.valueOf())})))&&void 0!==r?r:0}else e=e.sort((function(e,t){var a;return null===(a=e._stage3[m])||void 0===a?void 0:a.toString().localeCompare(t._stage3[m].toString())}));return"DESC"===h?e.reverse():e}),[a,h,s,m,n,g]),N=Object(r.useCallback)((function(e,t){O([e,t])}),[]);return Object(f.jsx)("div",{ref:v,children:Object(f.jsx)(qe.a,{minColumnWidth:x,columns:C,rows:k,rowHeight:48,sortColumn:m,sortDirection:h,onSort:N,height:432,onColumnResize:function(){},onRowsUpdate:function(e){if("CELL_UPDATE"===e.action){var t=Object(Ue.a)(a);t[e.fromRow]=Object(o.a)(Object(o.a)({},t[e.fromRow]),{},Object(Te.a)({},e.cellKey,e.updated[e.cellKey])),l&&l(t)}}})})}var tt=a(1039),at=a(463),rt=a.n(at),nt=[{name:"Hate crimes in New York",category:"Alluvial Diagram",url:"./sample-datasets/Alluvial diagram - Hate crimes in New York.tsv",delimiter:"\t",sourceName:"NYC Open Data",sourceURL:"https://data.cityofnewyork.us/Public-Safety/NYPD-Hate-Crimes/bqiq-cu78"},{name:"Lannister vs Starck relationships",category:"Arc diagrams",url:"./sample-datasets/Arc diagrams - Lannister vs Starck relationships.tsv",delimiter:"\t",sourceName:"T. Breid via Kaggle",sourceURL:"https://www.kaggle.com/theobreid/got-data"},{name:"EU Index of consumer prices",category:"Horizon Graph",url:"./sample-datasets/Horizon Graph - EU Index of consumer prices.tsv",delimiter:"\t",sourceName:"Eurostat",sourceURL:"https://ec.europa.eu/eurostat/databrowser/bookmark/d84c6140-ed7e-443e-baf9-918679862d58?lang=en"},{name:"New York mean wage per occupation",category:"Beeswarm plot",url:"./sample-datasets/Beeswarm plot - NY mean wages.tsv",delimiter:"\t",sourceName:"NYC Open Data",sourceURL:"https://data.ny.gov/w/gkgz-nw24/caer-yrtv?cur=S3JXBWlXCbs&from=SAa8_R9mOdD"},{name:"Temperature in Paris during the World War II",category:"Contour plot",url:"./sample-datasets/Contour plot - Mean temperature in Paris 1944-1945.tsv",delimiter:"\t",sourceName:"NOAA",sourceURL:"https://www.ncdc.noaa.gov/data-access/land-based-station-data/land-based-datasets/world-war-ii-era-data"},{name:"Highest grossing movies in history",category:"Bubble chart",url:"./sample-datasets/Bubble Chart - TOP 50 Groossing Movies.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/w/index.php?title=List_of_highest-grossing_films&oldid=1023491946"},{name:"Foreign residents in Milan",category:"Bumpchart",url:"./sample-datasets/Bump chart - Foreign residents in Milan.tsv",delimiter:"\t",sourceName:"Comune di Milano",sourceURL:"https://dati.comune.milano.it/dataset/ds74-popolazione-residenti-stranieri-cittadinanza"},{name:"Estimated migration flows between macro-areas from 1960 to 1970",category:"Chord diagram",url:"./sample-datasets/Chord Diagram - Estimated migration flows between macro-areas.csv",delimiter:",",sourceName:"Gui J. Abel, via Data to Viz",sourceURL:"https://github.com/holtzy/data_to_viz/tree/master/Example_dataset"},{name:"Most populated cities per continent",category:"Circle packing",url:"./sample-datasets/Circle Packing - Most populated cities.tsv",delimiter:"\t",sourceName:"Wikidata",sourceURL:"https://query.wikidata.org/#SELECT%20%3Fitem%20%3FitemLabel%20%3Fpopulation%20%3Fcountry%20%3FcountryLabel%20%3Fcontinent%20%3FcontinentLabel%0AWHERE%20%7B%0A%20%20%3Fitem%20wdt%3AP31%20wd%3AQ1637706%20.%20%23%20get%20things%20that%20are%20bands%0A%20%20%3Fitem%20wdt%3AP1082%20%3Fpopulation%20.%0A%20%20%23%3Fitems%20wdt%3AP571%20%3Fdate%20.%20%23%20get%20the%20date%20when%20the%20band%20was%20founded%0A%20%20%3Fitem%20wdt%3AP17%20%3Fcountry%20.%0A%20%20%3Fcountry%20wdt%3AP30%20%3Fcontinent%20.%0A%20%20%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D%0A"},{name:"Kobe Bryant shoots",category:"Hexagonal Binning, Voronoi diagram",url:"./sample-datasets/Hexbin - basketball shots.tsv",delimiter:"\t",sourceName:"Kaggle",sourceURL:"https://www.kaggle.com/c/kobe-bryant-shot-selection/"},{name:"Orchestras by musical instrument",category:"Treemap",url:"./sample-datasets/Treemap - Orchestra.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/w/index.php?title=Orchestra&oldid=1022472978"},{name:"Italians PMs and Presidents",category:"Gantt chart",url:"./sample-datasets/Gantt chart - Italian PMs and presidents.tsv",delimiter:"\t",sourceName:"Wikidata",sourceURL:"https://query.wikidata.org/#%23Primi%20ministri%0ASELECT%20%3Fitem%20%3FitemLabel%20%3Fstart%20%3Fend%0AWHERE%20%0A%7B%0A%20%20%3Fitem%20p%3AP39%20%3Fposition.%0A%20%20%3Fposition%20ps%3AP39%20wd%3AQ332711%3B%0A%20%20%20%20%20%20%20%20pq%3AP580%20%3Fstart%3B%0A%20%20%20%20%20%20%20%20pq%3AP582%20%3Fend%0A%20%20%23%3Fstart%20wdt%3AP580%20%3Fitem.%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D"},{name:"Revenues per Music format",category:"Line chart",url:"./sample-datasets/Line chart - RIAA Music format revenues.tsv",delimiter:"\t",sourceName:"RIAA",sourceURL:"https://www.riaa.com/u-s-sales-database/"},{name:"Energy flows in UK (2050)",category:"Sankey diagram",url:"./sample-datasets/Sankey diagram - Energy flows.tsv",delimiter:"\t",sourceName:"gov.uk",sourceURL:"https://www.gov.uk/government/publications/2050-pathways-calculator-with-costs"},{name:"Aromas of wine and frequency",category:"Sunburst Diagram",url:"./sample-datasets/Sunburst - Wine Aromas.tsv",delimiter:"\t",sourceName:"Own work",sourceURL:""},{name:"Happiness index",category:"Multiset Barchart",url:"./sample-datasets/Multiset Barchart - Happiness Index.tsv",delimiter:"\t",sourceName:"World Happiness Report",sourceURL:"https://worldhappiness.report/"},{name:"GDP sector composition",category:"Pie chart, Stacked barchart",url:"./sample-datasets/Stacked barchart - GDP sector composition.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/w/index.php?title=List_of_countries_by_GDP_sector_composition&oldid=1022131842"},{name:"Felidae classification (cats and friends)",category:"Dendrogram, Circular dendrogram",url:"./sample-datasets/Dendrogram - Felidae classification.tsv",delimiter:"\t",sourceName:"Special thanks to interns",sourceURL:""},{name:"Iris flowers",category:"Convex hull, Parallel Coordinates",url:"./sample-datasets/Convex hull - Iris flowers.tsv",delimiter:"\t",sourceName:"R. Fisher",sourceURL:"https://en.wikipedia.org/wiki/Iris_flower_data_set"},{name:"Letter Frequency by Language",category:"Matrix plot (Heatmap)",url:"./sample-datasets/Matrix Plot - Letters frequencies by language.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/wiki/Letter_frequency"},{name:"FIFA players statistics",category:"Radar Chart",url:"./sample-datasets/Radar Chart - Fifa players.tsv",delimiter:"\t",sourceName:"K. Gadiya via Kaggle",sourceURL:"https://www.kaggle.com/karangadiya/fifa19"},{name:"Olympics Medals",category:"Streamgraph",url:"./sample-datasets/Streamgraph - Olympics Medals.tsv",delimiter:"\t",sourceName:"D. Agrawal via Kaggle",sourceURL:"https://www.kaggle.com/divyansh22/summer-olympics-medals"},{name:"Weather in New York, 2012-2015",category:"Violin plot, Boxplot",url:"./sample-datasets/Violin plot - Weather in New York.tsv",delimiter:"\t",sourceName:"NOAA via Vega Dataset",sourceURL:"https://github.com/vega/vega-datasets/blob/master/SOURCES.md#seattle-weathercsv"},{name:"Netflix Original Series 2013/2017",category:"Bar chart",url:"./sample-datasets/Bar chart - Netflix Original Series.tsv",delimiter:"\t",sourceName:"M. Schroyer via Data World",sourceURL:"https://data.world/mattschroyer/netflix-original-series"},{name:"Premier League and Serie A points",category:"Slope chart",url:"./sample-datasets/Slope graph - Premier SerieA ranking.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/wiki/2019%E2%80%9320_Premier_League"}];function ct(e){var t=e.onSampleReady,a=e.setLoadingError,r=function(){var e=Object(u.a)(l.a.mark((function e(r){var n,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delimiter,c=r.url,e.prev=1,e.next=4,fetch(c);case 4:s=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),a("Loading error. "+e.t0.message),e.abrupt("return");case 11:return e.next=13,s.text();case 13:o=e.sent,t(o,n),a(null);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(y.a,{children:nt.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e,t){return Object(f.jsx)(C.a,{xs:6,lg:4,xl:3,style:{marginBottom:15},children:Object(f.jsxs)(tt.a,{className:"cursor-pointer h-100",children:[Object(f.jsx)(tt.a.Body,{onClick:function(){r(e)},className:"d-flex flex-column",children:Object(f.jsxs)(tt.a.Title,{className:"",children:[Object(f.jsx)("h2",{className:"",children:e.name}),Object(f.jsx)("h4",{className:"m-0",children:e.category})]})}),Object(f.jsxs)("a",{href:e.sourceURL,className:[rt.a["dataset-source"]].join(" "),children:["Source: ",e.sourceName]})]})},t)}))})}a(516);var st=function e(t){var a=t.contextName,n=t.nestingLevel,c=t.context,s=t.selectFilter,o=t.onSelect,i=t.path,l=s(c),u=typeof c,p=Object(r.useState)(!1),j=Object(d.a)(p,2),b=j[0],m=j[1],h=["json-nested",l?"selectable":null,b?"hover":null].filter((function(e){return null!==e})).join(" "),O=Object(r.useCallback)((function(e){l&&(e.stopPropagation(),e.preventDefault(),o&&o(c,i.join(".")))}),[c,l,o,i]),g=Object(r.useCallback)((function(e){l&&(e.stopPropagation(),e.preventDefault(),m(!0))}),[l]),v=Object(r.useCallback)((function(e){l&&(e.stopPropagation(),e.preventDefault(),m(!1))}),[l]);return"object"===u&&null!==u?Object(f.jsxs)("div",{className:h,onClick:O,onMouseOver:g,onMouseOut:v,children:[a&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"property-name",children:a}),Object(f.jsx)("span",{className:"colon",children:": "})]}),!Array.isArray(c)&&Object(f.jsx)("span",{className:"curly-bracket open-bracket",children:"{"}),Array.isArray(c)&&Object(f.jsx)("span",{className:"square-bracket open-bracket",children:"["}),Object(E.map)(c,(function(t,a){return Object(f.jsx)(e,{contextName:Array.isArray(c)?null:a,nestingLevel:n+1,context:t,selectFilter:s,onSelect:o,path:[].concat(Object(Ue.a)(i),[a])},a)})),!Array.isArray(c)&&Object(f.jsx)("span",{className:"curly-bracket close-bracket",children:"}"}),Array.isArray(c)&&Object(f.jsx)("span",{className:"square-bracket close-bracket",children:"]"})]}):Object(f.jsxs)("div",{className:h,onClick:O,onMouseOver:g,onMouseOut:v,children:[a&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"property-name",children:a}),Object(f.jsx)("span",{className:"colon",children:": "})]}),null===c&&Object(f.jsx)("span",{className:"scalar-value",children:"null"}),null!==c&&Object(f.jsxs)(f.Fragment,{children:[("bigint"===u||"number"===u)&&Object(f.jsx)("span",{className:"scalar-value scalar-value-numeric",children:c.toString()}),"string"===u&&Object(f.jsxs)("span",{className:"scalar-value scalar-value-string",children:['"',c.toString(),'"']}),"boolean"===u&&Object(f.jsxs)("span",{className:"scalar-value scalar-value-bool",children:['"',c?"true":"false",'"']}),"undefined"===u&&Object(f.jsx)("span",{className:"scalar-value scalar-value-undefined",children:"undefined"})]})]})},ot=function(e){var t=e.context,a=e.selectFilter,r=e.onSelect;return Object(f.jsx)("pre",{className:"json-viewer",children:Object(f.jsx)(st,{contextName:null,nestingLevel:0,context:t,selectFilter:a,onSelect:r,path:[]})})},it=a(481),lt=a(159),ut=a.n(lt),dt=["title","value","onChange"];function pt(e){var t=e.title,a=e.value,n=e.onChange,c=(Object(Ie.a)(e,dt),a.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")),s=Object(r.useCallback)((function(e){if(n){var t=e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");n(t)}}),[n]),o=function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:["small",ut.a["separator-preview"]].join(" "),children:e})," ",Object(f.jsx)("span",{children:ge[e]})]})};return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"option",children:[t,Object(f.jsxs)(it.a,{className:"d-inline-block raw-dropdown",children:[Object(f.jsx)(it.a.Toggle,{variant:"white",className:"d-flex justify-content-start align-items-center text-truncate",children:o(c)}),Object(f.jsx)(it.a.Menu,{children:Object.keys(ge).map((function(e){return Object(f.jsx)(it.a.Item,{onSelect:function(){return s(e)},children:o(e)},ge[e])}))})]})]})})}var jt=["title","value","onChange"];function bt(e){var t=e.title,a=e.value,n=e.onChange,c=Object(Ie.a)(e,jt),s=a,i=Object(r.useCallback)((function(e){if(n){var t=e.target.value;n(t)}}),[n]);return Object(f.jsxs)("div",{className:"option",children:[t,Object(f.jsx)("input",Object(o.a)({type:"text",className:"form-control text-field d-inline-block",value:s,onChange:i},c))]})}var mt=["title","value","onChange"];function ht(e){var t=e.title,a=e.value,n=e.onChange,c=Object(Ie.a)(e,mt),s=a,i=Object(r.useCallback)((function(e){if(n){var t=e.target.value;n(t)}}),[n]);return Object(f.jsxs)("div",{className:"option",children:[t,Object(f.jsx)("input",Object(o.a)({type:"text",className:"form-control text-field d-inline-block",value:s,onChange:i},c))]})}var Ot=["title","value","onChange"];function ft(e){var t=e.title,a=e.value,n=e.onChange,c=(Object(Ie.a)(e,Ot),Object(r.useCallback)((function(e){n&&n(e)}),[n]));return Object(f.jsxs)("div",{className:"option",children:[t,Object(f.jsxs)(it.a,{className:"d-inline-block raw-dropdown",children:[Object(f.jsx)(it.a.Toggle,{variant:"white",className:"",children:a}),Object(f.jsxs)(it.a.Menu,{children:[Object(f.jsx)(it.a.Header,{children:Object(f.jsxs)("span",{children:["from"," ",Object(f.jsx)("a",{href:"https://github.com/d3/d3-time-format/tree/master/locale",target:"_blank",rel:"noopener noreferrer",children:"d3-time-format"})]})}),Object.keys(fe).map((function(e){return Object(f.jsx)(it.a.Item,{onSelect:function(){return c(e)},children:e},e)}))]})]})]})}var gt=["title","value","list","onChange"];function vt(e){var t=e.title,a=e.value,n=e.list,c=e.onChange,s=(Object(Ie.a)(e,gt),Object(r.useCallback)((function(e){c&&c(e)}),[c]));return Object(f.jsxs)("div",{className:"option",children:[t,Object(f.jsxs)(it.a,{className:"d-inline-block raw-dropdown",children:[Object(f.jsx)(it.a.Toggle,{variant:"white",className:"truncate-160px",disabled:0===n.length,children:a||"Column"}),Object(f.jsxs)(it.a.Menu,{children:[a&&Object(f.jsx)(it.a.Item,{onSelect:function(){return s(null)},children:"Do not stack"}),Object.keys(n).map((function(e){return Object(f.jsx)(it.a.Item,{onSelect:function(){return s(e)},children:e},e)}))]})]})]})}var xt=a(464),wt=a.n(xt);function yt(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.url);case 2:return a=e.sent,e.next=5,a.text();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(e){e.userInput;var t=e.setUserInput,a=e.setLoadingError,n=e.initialState,c=void 0===n?null:n,s=Object(r.useState)(null===c||void 0===c?void 0:c.url),o=Object(d.a)(s,2),i=o[0],p=o[1],j=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(r){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={type:"url",url:r},e.prev=1,e.next=4,yt(n);case 4:c=e.sent,t(c,n),a(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a("Loading error. "+e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,t]),b=Object(r.useCallback)((function(e){return e.stopPropagation(),e.preventDefault(),j(i),!1}),[i,j]);return Object(f.jsxs)("form",{onSubmit:b,children:[Object(f.jsx)("input",{className:Ge()("w-100",wt.a["url-input"]),value:i,onChange:function(e){p(e.target.value)}}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)("button",{className:"btn btn-sm btn-success mt-3",disabled:!i,type:"submit",children:"Load data"})})]})}var Nt,_t=a(161),St=a(238),Dt=a.n(St),Lt=a(61),Rt=a(465),Tt=a.n(Rt),At=a(310),Ft=(a(964),{wd:"http://www.wikidata.org/entity/",wds:"http://www.wikidata.org/entity/statement/",wdv:"http://www.wikidata.org/value/",wdt:"http://www.wikidata.org/prop/direct/",wikibase:"http://wikiba.se/ontology#",p:"http://www.wikidata.org/prop/",ps:"http://www.wikidata.org/prop/statement/",pq:"http://www.wikidata.org/prop/qualifier/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",bd:"http://www.bigdata.com/rdf#",wdref:"http://www.wikidata.org/reference/",psv:"http://www.wikidata.org/prop/statement/value/",psn:"http://www.wikidata.org/prop/statement/value-normalized/",pqv:"http://www.wikidata.org/prop/qualifier/value/",pqn:"http://www.wikidata.org/prop/qualifier/value-normalized/",pr:"http://www.wikidata.org/prop/reference/",prv:"http://www.wikidata.org/prop/reference/value/",prn:"http://www.wikidata.org/prop/reference/value-normalized/",wdno:"http://www.wikidata.org/prop/novalue/",wdata:"http://www.wikidata.org/wiki/Special:EntityData/",schema:"http://schema.org/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",owl:"http://www.w3.org/2002/07/owl#",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#",prov:"http://www.w3.org/ns/prov#",bds:"http://www.bigdata.com/rdf/search#",gas:"http://www.bigdata.com/rdf/gas#",hint:"http://www.bigdata.com/queryHints#"});function Pt(e){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(u.a)(l.a.mark((function e(t){var a,r,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new At.Generator,r=new Tt.a({endpointUrl:t.url}),e.next=4,r.query.select(a.stringify(t.query));case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,(s=Ut(c.head.vars,c.results.bindings))[Se]=!0,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Et(e){e.userInput;var t,a=e.setUserInput,n=e.setLoadingError,c=e.initialState,s=Object(r.useState)(null!==(t=null===c||void 0===c?void 0:c.url)&&void 0!==t?t:"https://query.wikidata.org/sparql"),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(r.useState)(null),p=Object(d.a)(u,2),j=p[0],b=p[1],m=Object(r.useRef)(),h=Object(r.useMemo)((function(){return(null===c||void 0===c?void 0:c.query)?(new At.Generator).stringify(c.query):""}),[c]),O=Object(r.useCallback)((function(e){var t=e.detail.query;"SELECT"===t.queryType?b(t):b(null)}),[]),g=Object(r.useCallback)((function(){console.log("parser failed"),b(null)}),[]),v=Object(r.useCallback)((function(){Pt({type:"sparql",url:i,query:j}).then((function(e){a(e,{type:"sparql",url:i,query:j})})).catch((function(e){n("It was not possible to execute the query on the given endpoint")}))}),[j,n,a,i]);return Object(r.useEffect)((function(){var e=m.current;Object(Lt.b)(Object(Lt.a)(Nt||(Nt=Object(_t.a)(["<sparql-editor\n        auto-parse\n        value=","\n        customPrefixes=","\n        @parsed=","\n        @parsing-failed=","\n      ></sparql-editor>"])),h,JSON.stringify(Ft),O,g),e)}),[O,g,h]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:Ge()(Dt.a["base-iri-input-here"]),children:Object(f.jsx)("span",{children:"Write your SPARQL Endpoint here"})}),Object(f.jsx)("input",{className:Ge()("w-100",Dt.a["url-input"]),value:i,onChange:function(e){l(e.target.value)}}),Object(f.jsx)("div",{className:Ge()(Dt.a["query-input-here"]),children:Object(f.jsx)("span",{children:"Write your query here"})}),Object(f.jsx)("div",{ref:m}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)("button",{className:"btn btn-sm btn-success mt-3",disabled:!j||!i,onClick:v,children:"Run query"})})]})}function Ut(e,t){var a,r=[],n=Object(Ne.a)(t);try{for(n.s();!(a=n.n()).done;){var c,s=a.value,o={},i=Object(Ne.a)(e);try{for(i.s();!(c=i.n()).done;){var l=c.value,u=s[l];o[l]=u?u.value:""}}catch(d){i.e(d)}finally{i.f()}r.push(o)}}catch(d){n.e(d)}finally{n.f()}return r}var It={url:yt,sparql:Pt},qt={url:"Refresh data from url",sparql:"Refresh data from query"};function Bt(e){var t=function(){var t=Object(u.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=It[Object(E.get)(e.dataSource,"type","")],t.next=3,a(e.dataSource);case 3:r=t.sent,e.onDataRefreshed(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsx)(y.a,{children:Object(f.jsxs)(C.a,{className:ut.a.parsingOptions,children:[Object(f.jsx)("b",{children:"DATA PARSING OPTIONS"}),"csv"===e.userDataType&&Object(f.jsx)(pt,{title:"Column separator",value:e.separator,onChange:function(t){return e.setSeparator(t)}}),Object(f.jsx)(bt,{title:"Thousands separator",value:e.thousandsSeparator,onChange:function(t){return e.setThousandsSeparator(t)}}),Object(f.jsx)(ht,{title:"Decimals separator",value:e.decimalsSeparator,onChange:function(t){return e.setDecimalsSeparator(t)}}),Object(f.jsx)(ft,{title:"Date Locale",value:e.locale,onChange:function(t){return e.setLocale(t)}}),Object(E.get)(It,Object(E.get)(e.dataSource,"type",""),null)&&Object(f.jsxs)(T.a,{color:"primary",className:ut.a["refresh-button"],onClick:function(){return t()},children:[Object(f.jsx)(A.c,{className:"mr-2"}),Object(E.get)(qt,Object(E.get)(e.dataSource,"type",""),"Refresh data")]}),Object(f.jsx)("div",{className:"divider mb-3 mt-0"}),Object(f.jsx)("b",{children:"DATA TRANSFORMATION"}),Object(f.jsx)(vt,{title:"Stack on",value:e.stackDimension,list:e.dimensions,onChange:function(t){return e.setStackDimension(t)}})]})})}var Vt=a(57),zt=a.n(Vt),Gt=a(137),Wt=a(166),Ht=a.n(Wt),Jt=a(28),Kt=a(470),Yt=[Jt.a,Jt.b,Jt.c,Jt.d,Jt.e,Jt.f,Jt.g,Jt.h,Jt.i,Kt.a,Jt.j,Jt.k,Jt.l,Jt.m,Jt.n,Jt.o,Jt.p,Jt.q,Jt.r,Jt.s,Jt.t,Jt.u,Jt.v,Jt.w,Jt.x,Jt.y,Jt.z,Jt.A,Jt.B,Jt.C,Jt.D,Jt.E];function Xt(e){var t,a=e.onProjectSelected,n=e.setLoadingError,c=Object(r.useCallback)((function(e){var t=new FileReader;t.addEventListener("load",(function(e){try{var t=Object(p.deserializeProject)(e.target.result,Yt);n(null),a(t)}catch(e){n(e.message)}})),e.length&&t.readAsText(e[0])}),[a,n]),s=Object(Gt.a)({onDrop:c,accept:".graphon",maxFiles:1}),i=s.getRootProps,l=s.getInputProps,u=s.isDragReject,d=s.isDragAccept;return Object(f.jsxs)("div",Object(o.a)(Object(o.a)({className:Ge()(Ht.a.dropzone,(t={},Object(Te.a)(t,Ht.a.reject,u),Object(Te.a)(t,Ht.a.accept,d),t))},i()),{},{children:[Object(f.jsx)("input",Object(o.a)({},l())),Object(f.jsx)("span",{children:"Drag a file here or "}),Object(f.jsx)(T.a,{className:Ht.a["browse-button"],color:"primary",children:"Browse"}),Object(f.jsx)("span",{children:"a file from your computer"}),d&&Object(f.jsx)("p",{children:"All files will be accepted"}),u&&Object(f.jsx)("p",{children:"Some files will be rejected"})]}))}function Qt(e){var t=e.userInput,a=e.setUserInput,r=e.setLoadingError;return Object(f.jsx)("textarea",{value:t,onChange:function(e){var t=e.target.value;a(t),r(null)},style:{backgroundColor:"white",border:"1px solid lightgrey",borderRadius:4,width:"100%",padding:"1rem",minHeight:"250px",height:"40vh"}})}var Zt=a(167),$t=a.n(Zt);function ea(e){var t,a=e.setUserInput,n=e.setLoadingError,c=Object(r.useCallback)((function(e){var t=new FileReader;t.addEventListener("load",(function(e){a(e.target.result),n(null)})),e.length&&t.readAsText(e[0])}),[n,a]),s=Object(Gt.a)({onDrop:c,accept:"text/csv,text/plain,application/json,application/vnd.ms-excel,text/tsv,text/tab-separated-values",maxFiles:1}),i=s.getRootProps,l=s.getInputProps,u=s.isDragReject,d=s.isDragAccept;return Object(f.jsxs)("div",Object(o.a)(Object(o.a)({className:Ge()($t.a.dropzone,(t={},Object(Te.a)(t,$t.a.reject,u),Object(Te.a)(t,$t.a.accept,d),t))},i()),{},{children:[Object(f.jsx)("input",Object(o.a)({},l())),Object(f.jsx)("span",{children:"Drag a file here or "}),Object(f.jsx)(T.a,{className:$t.a["browse-button"],color:"primary",children:"Browse"}),Object(f.jsx)("span",{children:"a file from your computer"}),d&&Object(f.jsx)("p",{children:"All files will be accepted"}),u&&Object(f.jsx)("p",{children:"Some files will be rejected"})]}))}function ta(){return Object(f.jsxs)("div",{className:zt.a["loading-component"],children:[Object(f.jsx)("div",{className:zt.a["bg-animated"]}),Object(f.jsx)("p",{children:"loading..."})]})}var aa=a(1024);var ra=function(e){var t=e.variant,a=void 0===t?"warning":t,r=e.message,n=void 0===r?"A default warning message.":r,c=e.action,s=void 0===c?null:c;return Object(f.jsxs)(aa.a,{variant:a,className:"my-2 d-flex flex-row justify-content-between align-items-center",children:[n,s]})};var na=function(e){var t=e.replaceRequiresConfirmation,a=e.commitDataReplace,n=e.cancelDataReplace,c=Object(r.useState)(!0),s=Object(d.a)(c,2),o=s[0],i=s[1];return Object(f.jsxs)(R.a,{className:"raw-modal",show:o,onHide:function(){i(!1)},backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(f.jsx)(R.a.Header,{children:Object(f.jsxs)(R.a.Title,{as:"h5",children:["Warning:"," ","parse-error"===t&&Object(f.jsx)(f.Fragment,{children:"parsing error"}),t.startsWith("missing-column:")&&Object(f.jsx)(f.Fragment,{children:"missing column"}),"type-mismatch"===t&&Object(f.jsx)(f.Fragment,{children:"data-type mismatch"})]})}),Object(f.jsxs)(R.a.Body,{children:["parse-error"===t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"There was an error while parsing new data."}),Object(f.jsx)("p",{children:"You can load the new data and try to fix the error or return to the data previously loaded."})]}),t.startsWith("missing-column:")&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{children:["The data mapping of this project requires the dimension"," ",Object(f.jsx)("span",{className:"font-weight-bold",children:t.split(":")[1]}),", that we can't find in the new data."]}),Object(f.jsx)("p",{children:"You can create a new data mapping with the new data or return to the data previously loaded."})]}),"type-mismatch"===t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"The data-types previously set for this project can't be applied to the new data."}),Object(f.jsx)("p",{children:"You can use the new data and re-set data-types or return to the data previously loaded."})]})]}),Object(f.jsxs)(R.a.Footer,{children:[Object(f.jsx)(T.a,{variant:"warning",onClick:function(){a()},children:"Load new data"}),Object(f.jsx)(T.a,{variant:"secondary",onClick:function(){n()},children:"Cancel"})]})]})},ca=a(1040),sa=a(473),oa=a(471),ia=a.n(oa);var la=a(472),ua=a.n(la);function da(e){var t=e.content,a=Object(r.useCallback)((function(e){var t=document.createElement("button");t.style.display="none",document.body.appendChild(t);var a=new ia.a(t,{text:function(){return e}});t.focus(),t.click(),a.destroy(),document.body.removeChild(t)}),[]),n=Object(r.useState)(!1),c=Object(d.a)(n,2),s=c[0],o=c[1],i=Object(r.useCallback)((function(){s||(o(!0),a(t),setTimeout((function(){o(!1)}),3e3))}),[t,a,s]);return Object(f.jsxs)(T.a,{variant:"light",className:ua.a["copy-to-clipboard-button"]+" d-flex flex-row align-items-center",onClick:i,children:[s&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(sa.a,{className:"text-success"}),Object(f.jsx)("span",{className:"ml-2",children:"Copied to clipboard"})]}),!s&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.d,{}),Object(f.jsx)("span",{className:"ml-2",children:"Copy to clipboard"})]})]})}function pa(e){var t,a=e.userInput,n=e.setUserInput,c=e.userData,s=e.userDataType,o=e.parseError,i=e.unstackedColumns,l=e.separator,u=e.setSeparator,p=e.thousandsSeparator,j=e.setThousandsSeparator,b=e.decimalsSeparator,m=e.setDecimalsSeparator,h=e.locale,O=e.setLocale,g=e.stackDimension,v=e.dataSource,x=e.data,w=e.loading,k=e.coerceTypes,N=e.loadSample,_=e.handleInlineEdit,S=e.handleStackOperation,D=e.setJsonData,L=(e.resetDataLoader,e.dataLoaderMode),R=e.startDataReplace,T=e.cancelDataReplace,F=e.commitDataReplace,P=e.replaceRequiresConfirmation,M=e.hydrateFromProject,U=Object(r.useState)(),I=Object(d.a)(U,2),q=I[0],B=I[1],V=Object(r.useState)(null),z=Object(d.a)(V,2),G=z[0],W=z[1],H=[{id:"paste",name:"Paste your data",loader:Object(f.jsx)(Qt,{userInput:a,setUserInput:function(e){return n(e,{type:"paste"})},setLoadingError:B}),message:"Copy and paste your data from other applications or websites. You can use tabular (TSV, CSV, DSV) or JSON data.",icon:A.d,allowedForReplace:!0},{id:"upload",name:"Upload your data",loader:Object(f.jsx)(ea,{userInput:a,setUserInput:function(e){return n(e,{type:"upload"})},setLoadingError:B}),message:"You can load tabular (TSV, CSV, DSV) or JSON data.",icon:A.s,allowedForReplace:!0},{id:"sample",name:"Try our data samples",message:"",loader:Object(f.jsx)(ct,{onSampleReady:N,setLoadingError:B}),icon:A.k,allowedForReplace:!0},{id:"sparql",name:"SPARQL query",message:"Load data with a SparQL query",loader:Object(f.jsx)(Et,{userInput:a,setUserInput:function(e,t){return n(e,t)},setLoadingError:B,initialState:"sparql"===(null===G||void 0===G?void 0:G.type)?G:null}),icon:A.f,disabled:!1,allowedForReplace:!0},{id:"url",name:"From URL",message:"Enter a web address (URL) pointing to the data (e.g. a public Dropbox file, a public API, ...). Please, be sure the server is CORS-enabled.",loader:Object(f.jsx)(kt,{userInput:a,setUserInput:function(e,t){return n(e,t)},setLoadingError:B,initialState:"url"===(null===G||void 0===G?void 0:G.type)?G:null}),icon:A.p,disabled:!1,allowedForReplace:!0},{id:"project",name:"Open your project",message:"Load a .graphon project.",loader:Object(f.jsx)(Xt,{onProjectSelected:M,setLoadingError:B}),icon:A.j,allowedForReplace:!1}],J=Object(r.useState)(0),K=Object(d.a)(J,2),Y=K[0],X=K[1],Q=H[Y];t=c&&x?Object(f.jsx)(et,{userDataset:c,dataset:x.dataset,errors:x.errors,dataTypes:x.dataTypes,coerceTypes:k,onDataUpdate:_}):"json"===s&&null===c?Object(f.jsx)(ot,{context:JSON.parse(a),selectFilter:function(e){return Array.isArray(e)},onSelect:function(e,t){D(e,t)}}):w&&!x?Object(f.jsx)(ta,{}):Object(f.jsxs)(f.Fragment,{children:[Q.loader,Object(f.jsx)("p",{className:"mt-3",children:Q.message})]});var Z=Object(r.useCallback)((function(){window.location.replace(window.location.pathname)}),[]),$=c?Object(f.jsx)(da,{content:Object(ca.a)(c)}):null;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(y.a,{className:"content-glass",children:[" ",!c&&Object(f.jsxs)(C.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options",children:[H.filter((function(e){return L!==Pe||e.allowedForReplace})).map((function(e,t){var a=["w-100","d-flex","align-items-center","user-select-none","cursor-pointer",zt.a["loading-option"],e.disabled?zt.a.disabled:null,e.id!==Q.id||s?null:zt.a.active,s?zt.a.disabled:null].filter((function(e){return null!==e})).join(" ");return Object(f.jsxs)("div",{className:a,onClick:function(){X(t)},children:[Object(f.jsx)(e.icon,{className:"w-25"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:e.name})]},e.id)})),L===Pe&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"divider mb-3 mt-0"}),Object(f.jsxs)("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(zt.a["start-over"]," user-select-none cursor-pointer"),onClick:Z,children:[Object(f.jsx)(A.c,{className:"mr-2"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Reset"})]}),Object(f.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(zt.a["start-over"]," ").concat(zt.a.cancel," user-select-none cursor-pointer mb-3"),onClick:function(){T()},children:Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Cancel"})})]})]}),c&&Object(f.jsxs)(C.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options",children:[Object(f.jsx)(Bt,{locale:h,setLocale:O,separator:l,setSeparator:u,thousandsSeparator:p,setThousandsSeparator:j,decimalsSeparator:b,setDecimalsSeparator:m,dimensions:x?i||x.dataTypes:[],stackDimension:g,setStackDimension:S,userDataType:s,dataSource:v,onDataRefreshed:function(e){return n(e,v)}}),Object(f.jsx)("div",{className:"divider mb-3 mt-0"}),Object(f.jsxs)("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(zt.a["start-over"]," user-select-none cursor-pointer"),onClick:Z,children:[Object(f.jsx)(A.c,{className:"mr-2"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Reset"})]}),Object(f.jsxs)("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(zt.a["start-over"]," user-select-none cursor-pointer"),onClick:function(){W(v);var e=H.findIndex((function(e){return e.id===(null===v||void 0===v?void 0:v.type)}));X(Math.max(e,0)),R()},children:[Object(f.jsx)(A.a,{className:"mr-2"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Change data"})]})]}),Object(f.jsx)(C.a,{children:Object(f.jsx)(y.a,{className:"h-100",children:Object(f.jsxs)(C.a,{className:"h-100",children:[t,x&&!o&&0===Object(E.get)(x,"errors",[]).length&&Object(f.jsx)(ra,{variant:"success",message:Object(f.jsxs)("span",{children:[Object(f.jsxs)("span",{className:"font-weight-bold",children:[x.dataset.length," rows"]})," ","(",x.dataset.length*Object.keys(x.dataTypes).length," ","cells) have been successfully parsed, now you can choose a chart!"]}),action:$}),o&&Object(f.jsx)(ra,{variant:"danger",message:o,action:$}),Object(E.get)(x,"errors",[]).length>0&&Object(f.jsx)(ra,{variant:"warning",message:function(e){var t=Object(E.get)(e,"errors",[]),a=e.dataset.length-t.length,r=t[0].row+1,n=Object.keys(t[0].error)[0];return Object(f.jsxs)("span",{children:["Ops, please check ",Object(f.jsxs)("span",{className:"font-weight-bold",children:["row ",r]})," at column ",Object(f.jsx)("span",{className:"font-weight-bold",children:n}),"."," ",2===t.length&&Object(f.jsxs)(f.Fragment,{children:[" ","There's another issue at row"," ",Object(f.jsx)("span",{className:"font-weight-bold",children:t[1].row+1}),"."," "]}),t.length>2&&Object(f.jsxs)(f.Fragment,{children:[" ","There are issues in"," ",Object(f.jsx)("span",{className:"font-weight-bold",children:t.length-1})," more rows."," "]}),a>0&&Object(f.jsxs)(f.Fragment,{children:["The remaining"," ",Object(f.jsxs)("span",{className:"font-weight-bold",children:[a," row",a>1&&Object(f.jsx)(f.Fragment,{children:"s"})]})," ","look",1===a&&Object(f.jsx)(f.Fragment,{children:"s"})," fine."]})]})}(x),action:$}),q&&Object(f.jsx)(ra,{variant:"danger",message:q,action:$})]})})})]}),P&&Object(f.jsx)(na,{replaceRequiresConfirmation:P,commitDataReplace:F,cancelDataReplace:T})]})}var ja=n.a.memo(pa),ba=a(223),ma=a.n(ba),ha=a(142),Oa=a.n(ha);function fa(e,t){return"All charts"===t?e:e.filter((function(e){return-1!==e.metadata.categories.indexOf(t)}))}function ga(e){var t,a,n=e.availableCharts,c=e.currentChart,s=e.setCurrentChart,o=e.onRemoveCustomChart,i=e.onAddChartClick,l=Object(r.useState)("All charts"),u=Object(d.a)(l,2),p=u[0],j=u[1],b=Object(r.useMemo)((function(){return fa(n,p)}),[n,p]),m=Object(r.useCallback)((function(e){j(e);var t=fa(n,e);-1===t.indexOf(c)&&s(t[0])}),[n,c,s]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(y.a,{children:Object(f.jsxs)(C.a,{className:"text-right",children:["Show",Object(f.jsxs)(it.a,{className:"d-inline-block ml-2 raw-dropdown",children:[Object(f.jsx)(it.a.Toggle,{variant:"white",className:"pr-5",children:p.charAt(0).toUpperCase()+p.slice(1)}),Object(f.jsxs)(it.a.Menu,{children:[Object(f.jsx)(it.a.Item,{onClick:function(){return m("All charts")},children:"All charts"},"All charts"),ma()(n.map((function(e){return e.metadata.categories})).flat()).map((function(e){return Object(f.jsx)(it.a.Item,{onClick:function(){return m(e)},children:e.charAt(0).toUpperCase()+e.slice(1)},e)}))]})]})]})}),Object(f.jsxs)(y.a,{children:[Object(f.jsx)(C.a,{xs:3,className:"pt-3",children:c&&Object(f.jsxs)(tt.a,{className:Oa.a.currentChart,children:[Object(f.jsx)(tt.a.Img,{variant:"top",src:c.metadata.thumbnail}),Object(f.jsxs)(tt.a.Body,{children:[Object(f.jsx)(tt.a.Title,{className:"m-0",children:Object(f.jsx)("h2",{className:"m-0",children:c.metadata.name})}),Object(f.jsx)(tt.a.Subtitle,{className:"m-0",children:Object(f.jsx)("h4",{className:"mb-2",children:c.metadata.category})}),Object(f.jsx)(tt.a.Text,{children:c.metadata.description}),Object(f.jsxs)(tt.a.Link,{className:Ge()((t={},Object(Te.a)(t,Oa.a.disabled,!c.metadata.code),Object(Te.a)(t,"underlined",!0),t)),href:c.metadata.code,target:"_blank",children:[Object(f.jsx)(A.m,{color:"black"})," Code"]}),Object(f.jsxs)(tt.a.Link,{className:Ge()((a={},Object(Te.a)(a,Oa.a.disabled,!c.metadata.tutorial),Object(Te.a)(a,"underlined",!0),a)),href:c.metadata.tutorial,target:"_blank",children:[Object(f.jsx)(A.m,{color:"black"})," Tutorial"]})]})]})}),Object(f.jsx)(C.a,{children:Object(f.jsxs)(y.a,{children:[b.map((function(e,t){return Object(f.jsx)(C.a,{xs:4,className:"p-3",children:Object(f.jsxs)(tt.a,{onClick:function(){s(e)},className:Ge()("flex-row h-100 cursor-pointer",Object(Te.a)({active:e===c?"active":""},Oa.a.customChart,!!e.rawCustomChart)),children:[Object(f.jsx)("div",{className:"h-100 w-25 ".concat(Oa.a.thumbnail),style:{backgroundImage:'url("'.concat(e.metadata.icon,'")')}}),Object(f.jsxs)(tt.a.Body,{className:"w-75 px-2 py-3",children:[Object(f.jsxs)(tt.a.Title,{className:"m-0",children:[Object(f.jsx)("h2",{className:"m-0",style:{whiteSpace:"nowrap"},children:e.metadata.name}),e.rawCustomChart&&Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{style:{position:"absolute",top:-8,right:-8},className:"btn btn-sm btn-primary",onClick:function(t){t.stopPropagation(),o(e)},children:Object(f.jsx)(A.i,{})}),Object(f.jsx)("small",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"block",whiteSpace:"nowrap"},children:e.rawCustomChart.source})]})]}),Object(f.jsx)(tt.a.Subtitle,{className:"m-0",children:Object(f.jsx)("h4",{className:"m-0",children:e.metadata.categories.join(", ").charAt(0).toUpperCase()+e.metadata.categories.join(", ").slice(1)})})]})]})},"chart-"+t)})),Object(f.jsx)(C.a,{xs:4,className:"p-3",children:Object(f.jsxs)(tt.a,{onClick:function(){i()},className:Ge()("flex-row h-100 cursor-pointer py-2"),children:[Object(f.jsx)("div",{className:"d-flex align-items-center justify-content-center w-25",children:Object(f.jsx)(A.o,{size:50,color:"var(--primary)"})}),Object(f.jsx)(tt.a.Body,{className:"w-75 px-2 py-3",children:Object(f.jsx)(tt.a.Title,{className:"m-0",children:Object(f.jsx)("h2",{className:"m-0",style:{whiteSpace:"nowrap"},children:"Load custom chart"})})})]})})]})})]})]})}var va=n.a.memo(ga),xa=a(162),wa=a.n(xa),ya=a(480),Ca=a(1026),ka=a(1037),Na=a(41),_a=a.n(Na),Sa=function(e){var t=e.dimensionName,a=e.dimensionType,r=e.commitLocalMapping,n=e.rollbackLocalMapping,c=Object(ka.a)({item:{id:t,type:"column"},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,t){t.didDrop()?r():n()}}),s=Object(d.a)(c,2),o=s[0].isDragging,i=s[1],l=Object(p.getTypeName)(a),u=Oe[l];return Object(f.jsxs)("div",{ref:i,className:"column-card ".concat(_a.a["column-card"]," ").concat(o?"is-dragging":""),children:[Object(f.jsx)(u,{className:_a.a["data-type-icon"]}),Object(f.jsx)("span",{className:_a.a["column-title"],children:t})]})},Da=a(1025);var La,Ra=function(e){var t=e.type,a=Oe[t];return Object(f.jsx)("span",{children:Object(f.jsx)(Ve.a,{placement:"top",overlay:Object(f.jsxs)(Da.a,{id:"tooltip-top",children:["Accepts ",t,"s"]}),children:Object(f.jsx)(a,{className:_a.a["accepted-type-icon"]})},"top")})},Ta=["title","titleId"];function Aa(){return Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Aa.apply(this,arguments)}function Fa(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Pa(e,t){var a=e.title,n=e.titleId,c=Fa(e,Ta);return r.createElement("svg",Aa({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-asterisk",viewBox:"0 0 16 16",ref:t,"aria-labelledby":n},c),a?r.createElement("title",{id:n},a):null,La||(La=r.createElement("path",{d:"M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z"})))}var Ma=r.forwardRef(Pa);a.p;var Ea=function(){return Object(f.jsx)(Ve.a,{placement:"top",overlay:Object(f.jsx)(Da.a,{id:"tooltip-top",children:"Mandatory"}),children:Object(f.jsx)(Ma,{width:"1rem",height:"1rem",style:{marginRight:"2px"}})},"top")},Ua=a(1038),Ia=a(24),qa=a.n(Ia),Ba=a(164),Va=a.n(Ba),za=a(239),Ga=a.n(za),Wa=a(140),Ha=a.n(Wa);function Ja(e){var t=e.draggingColumn,a=e.index,n=e.isValid,c=e.DataTypeIcon,s=e.columnId,o=e.dimension,i=e.aggregators,l=e.relatedAggregation,u=e.onMove,p=e.onChangeAggregation,j=e.onDeleteItem,b=e.onChangeDimension,m=e.commitLocalMapping,h=e.rollbackLocalMapping,O=(e.onInsertColumn,e.replaceDimension),g=(e.localMappding,Object(r.useRef)(null)),v=Object(Ua.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()&&"column"===e.getItem().type}},hover:function(e,t){if(o.multiple&&g.current){var r=a;if(e.dimensionId===o.id){var n,c=e.index;if(c!==r){var s=null===(n=g.current)||void 0===n?void 0:n.getBoundingClientRect(),i=(s.bottom-s.top)/2,l=t.getClientOffset().y-s.top;c<r&&l<i||c>r&&l>i||(u(c,r),e.index=r)}}}},drop:function(e,t){o.multiple||("column"===e.type?b(a,e.id):O(e.dimensionId,o.id,e.index,a))}}),x=Object(d.a)(v,2),w=x[0].isOver,y=x[1],C=Object(ka.a)({item:{type:"card",index:a,id:s,dimensionId:o.id},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){t.didDrop()?m():h()}}),k=Object(d.a)(C,2),N=k[0].isDragging;return(0,k[1])(y(g)),Object(f.jsxs)("div",{ref:g,style:{opacity:N||t?.5:1},className:Ge()("assigned-column",_a.a["column-card"],_a.a["assigned-column"],n?_a.a["column-valid"]:_a.a["column-invalid"],{"border border-danger":w}),children:[Object(f.jsx)("span",{children:!!c&&Object(f.jsx)(c,{className:_a.a["data-type-icon"]})}),Object(f.jsx)("span",{className:_a.a["column-title"],children:s}),o.aggregation&&Object(f.jsxs)(it.a,{className:"d-inline-block ml-2 raw-dropdown",children:[Object(f.jsx)(it.a.Toggle,{variant:n?"primary":"danger",className:"pr-5",children:qa()(xe,l,l)}),Object(f.jsx)(it.a.Menu,{children:i.map((function(e){return Object(f.jsx)(it.a.Item,{onClick:function(){return p(a,e)},children:qa()(xe,e,e)},e)}))})]}),Object(f.jsx)("button",{className:_a.a["remove-assigned"],type:"button",onClick:function(){return j(a)},children:Object(f.jsx)(A.t,{})})]})}var Ka=Object(p.getAggregatorNames)(),Ya=[],Xa=function(e){var t=e.dimension,a=e.dataTypes,n=e.mapping,c=e.setMapping,s=e.commitLocalMapping,i=e.rollbackLocalMapping,l=e.draggingId,u=e.setDraggingId,j=e.replaceDimension,b=e.localMappding,m=Object(Ua.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()}},drop:function(e,r){if("column"===e.type){var s,i,l=t.aggregation?Object(p.getDefaultDimensionAggregation)(t,a[e.id]):null,u=Object(p.getTypeName)(a[e.id]),d=0===(null===(s=t.validTypes)||void 0===s?void 0:s.length)||(null===(i=t.validTypes)||void 0===i?void 0:i.includes(u));c(Object(o.a)(Object(o.a)({},n),{},{ids:(n.ids||[]).concat(Va()()),value:[].concat(Object(Ue.a)(n.value||[]),[e.id]),isValid:d,mappedType:u,config:t.aggregation?{aggregation:[].concat(Object(Ue.a)(qa()(n,"config.aggregation")||[]),[l])}:void 0}))}else e.dimensionId!==t.id&&j(e.dimensionId,t.id,e.index,n.value?n.value.length:0,!0)}}),h=Object(d.a)(m,2),O=h[0].isOver,g=h[1],v=Object(r.useCallback)((function(e){c(Object(o.a)(Object(o.a)({},n),{},{config:{aggregation:Object(Ue.a)(e)}}))}),[n,c]),x=qa()(n,"ids",Ya),w=qa()(n,"value",Ya),y=qa()(n,"config.aggregation",Ya),k=Object(r.useCallback)((function(e,t){var a=Object(Ue.a)(y);a[e]=t,v(a)}),[y,v]),N=Object(r.useCallback)((function(e){var t;n.config&&(t=Object(o.a)(Object(o.a)({},n.config),{},{aggregation:n.config.aggregation.filter((function(t,a){return a!==e}))})),c(Object(o.a)(Object(o.a)({},n),{},{ids:n.ids.filter((function(t,a){return a!==e})),value:n.value.filter((function(t,a){return a!==e})),config:t}))}),[n,c]),_=Object(r.useCallback)((function(e,t){c(Object(o.a)(Object(o.a)({},n),{},{value:n.value.map((function(a,r){return r===e?t:a}))}))}),[n,c]),S=Object(r.useCallback)((function(e,t){var a;n.config&&(a=Object(o.a)(Object(o.a)({},n.config),{},{aggregation:Ga()(n.config.aggregation,e,t)})),c(Object(o.a)(Object(o.a)({},n),{},{ids:Ga()(n.ids,e,t),value:Ga()(n.value,e,t),config:a}),!0)}),[n,c]),D=Object(r.useCallback)((function(e,r){var s,i,l=t.aggregation?Object(p.getDefaultDimensionAggregation)(t,a[r.id]):null,d=Va()();u(d),c(Object(o.a)(Object(o.a)({},n),{},{ids:Ha()(null!==(s=n.ids)&&void 0!==s?s:[],e,d),value:Ha()(null!==(i=n.value)&&void 0!==i?i:[],e,r.id),config:t.aggregation?{aggregation:Ha()(qa()(n,"config.aggregation",[]),e,l)}:void 0}),!0)}),[a,t,n,u,c]);return Object(f.jsx)(C.a,{xs:6,lg:4,xl:4,children:Object(f.jsxs)("div",{className:_a.a["chart-dimension"]+" user-select-none",children:[Object(f.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center ".concat(_a.a["chart-dimension-header"]),children:[Object(f.jsx)("span",{className:"text-left",children:t.validTypes.map((function(e){return Object(f.jsx)(Ra,{type:e},e)}))}),Object(f.jsx)("span",{className:"text-capitalize text-center",children:t.name}),Object(f.jsx)("span",{className:_a.a["dimension-required"]+" text-right",style:{opacity:t.required?1:0},children:t.required&&Object(f.jsx)(Ea,{})})]}),x.map((function(e,r){var n,c,o=w[r],u=Object(p.getTypeName)(a[o]),d=t.aggregation?y[r]||Object(p.getDefaultDimensionAggregation)(t,u):void 0,m=0===(null===(n=t.validTypes)||void 0===n?void 0:n.length)||(null===(c=t.validTypes)||void 0===c?void 0:c.includes(u)),h=Oe[Object(p.getTypeName)(a[o])];return Object(f.jsx)(Ja,{id:e,index:r,onMove:S,onChangeDimension:_,onChangeAggregation:k,onDeleteItem:N,isValid:m,DataTypeIcon:h,columnId:o,dimension:t,aggregators:Ka,relatedAggregation:d,commitLocalMapping:s,rollbackLocalMapping:i,onInsertColumn:D,draggingColumn:l===e,replaceDimension:j,localMappding:b},e)})),(t.multiple||0===w.length)&&Object(f.jsxs)("div",{className:Ge()("dropzone",_a.a.dropzone,Object(Te.a)({},_a.a.active,O)),ref:g,children:[!t.multiple&&"Drop dimension here",t.multiple&&0===w.length&&"Drop dimensions here",t.multiple&&w.length>0&&"Drop another dimension here"]})]})})};function Qa(e,t){var a;return e.config&&(a=Object(o.a)(Object(o.a)({},e.config),{},{aggregation:e.config.aggregation.filter((function(e,a){return a!==t}))})),Object(o.a)(Object(o.a)({},e),{},{ids:e.ids.filter((function(e,a){return a!==t})),value:e.value.filter((function(e,a){return a!==t})),config:a})}function Za(e,t,a){return e.map((function(e,r){return r===t?a:e}))}function $a(e,t,a,r,n,c,s,i){var l,u,d,j,b,m,h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],O={};O.aggregation=null===(l=t[a])||void 0===l||null===(u=l.config)||void 0===u||null===(d=u.aggregation)||void 0===d?void 0:d[n],O.value=t[a].value[n];var f,g=h?Ha.a:Za,v=t[r]||{},x=Object(o.a)(Object(o.a)({},v),{},{ids:g(null!==(j=v.ids)&&void 0!==j?j:[],c,e),value:g(null!==(b=v.value)&&void 0!==b?b:[],c,O.value)}),w=s[r];s.aggregation&&(f=O.aggregation?O.aggregation:Object(p.getDefaultDimensionAggregation)(w,i[O.value]),x.config={aggregation:g(qa()(v,"config.aggregation",[]),c,f)});var y=Object(o.a)(Object(o.a)({},t),{},(m={},Object(Te.a)(m,a,Qa(t[a],n)),Object(Te.a)(m,r,x),m));return y}function er(e,t){var a=e.dataTypes,n=e.dimensions,c=e.mapping,s=e.setMapping,i=Object(r.useState)(c),l=Object(d.a)(i,2),u=l[0],p=l[1],j=Object(r.useCallback)((function(e,t,a){p((function(a){return Object(o.a)(Object(o.a)({},a),{},Object(Te.a)({},e,t))})),a||s((function(a){return Object(o.a)(Object(o.a)({},a),{},Object(Te.a)({},e,t))}))}),[s]),b=Object(r.useCallback)((function(e,t,r,c){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Va()();o&&g(i),p((function(s){return $a(i,s,e,t,r,c,n,a,o)})),o||s((function(s){return $a(i,s,e,t,r,c,n,a)}))}),[a,n,s]),m=Object(r.useState)(null),h=Object(d.a)(m,2),O=h[0],g=h[1],v=Object(r.useCallback)((function(){p(c),g(null)}),[c]),x=function(){s(w.current),g(null)},w=Object(r.useRef)();return Object(r.useEffect)((function(){w.current=u})),Object(r.useImperativeHandle)(t,(function(){return{clearLocalMapping:function(){p({})}}})),Object(f.jsx)(Ca.a,{backend:ya.a,children:Object(f.jsxs)(y.a,{children:[Object(f.jsxs)(C.a,{xs:3,children:[Object(f.jsx)("h5",{className:"text-uppercase",children:"Dimensions"}),wa()(a,(function(e,t){return Object(f.jsx)(Sa,{dimensionName:t,dimensionType:e,commitLocalMapping:x,rollbackLocalMapping:v},t)}))]}),Object(f.jsxs)(C.a,{children:[Object(f.jsx)("h5",{className:"text-uppercase",children:"Chart Variables"}),Object(f.jsx)(y.a,{className:"sticky-top",style:{top:"calc(var(--header-height) + 16px)"},children:n.map((function(e){return Object(f.jsx)(Xa,{dimension:e,dataTypes:a,mapping:u[e.id]||{},setMapping:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return j(e.id,t,a)},commitLocalMapping:x,rollbackLocalMapping:v,draggingId:O,setDraggingId:g,replaceDimension:b,localMappding:u},e.id)}))})]})]})})}var tr=n.a.memo(n.a.forwardRef(er)),ar=a(88),rr=a.n(ar),nr=["options","value","error","onChange","default","label"],cr=function(e){var t=e.options,a=void 0===t?[]:t,r=e.value,n=e.error,c=e.onChange,s=e.default,o=e.label,i=Object(Ie.a)(e,nr);return Object(f.jsxs)(y.a,{className:i.className,children:[Object(f.jsx)(C.a,{xs:6,className:"d-flex align-items-center nowrap",children:o}),Object(f.jsxs)(C.a,{xs:6,children:[Object(f.jsx)("select",{className:"custom-select raw-select",value:null!==r&&void 0!==r?r:s,onChange:function(e){var t=e.target.value,a="number"===i.type?Number(t):t;c(a)},children:a.map((function(e){return rr()(e)?Object(f.jsx)("option",{value:e.value,children:e.label},e.value):Object(f.jsx)("option",{value:e,children:e},e)}))}),n&&Object(f.jsx)("small",{children:Object(f.jsx)("i",{children:n})})]})]})},sr=n.a.memo(cr),or=["value","error","onChange","default","label","isEnabled"],ir=function(e){var t=e.value,a=e.error,r=e.onChange,n=e.default,c=e.label,s=e.isEnabled,i=Object(Ie.a)(e,or);return i.options?Object(f.jsx)(sr,Object(o.a)({value:t,error:a,onChange:r,default:n,disabled:!s,label:c},i)):Object(f.jsxs)(y.a,{className:i.className,children:[Object(f.jsx)(C.a,{xs:6,className:"d-flex align-items-center nowrap",children:c}),Object(f.jsx)(C.a,{xs:6,children:Object(f.jsx)("input",{className:"w-100 form-control text-field",type:"number",value:null!==t&&void 0!==t?t:"",step:i.step,min:i.min,max:i.max,disabled:!s,onChange:function(e){var t=e.target.value;if(""===t)r(void 0);else{var a=parseFloat(t);isNaN(a)?r(void 0):r(a)}},placeholder:n})}),a&&Object(f.jsx)("small",{children:Object(f.jsx)("i",{children:a})})]})},lr=n.a.memo(ir),ur=["value","error","onChange","default","label","isEnabled"],dr=function(e){var t=e.value,a=e.error,r=e.onChange,n=e.default,c=e.label,s=e.isEnabled,i=Object(Ie.a)(e,ur);return i.options?Object(f.jsx)(sr,Object(o.a)({value:t,error:a,onChange:r,default:n,label:c},i)):Object(f.jsxs)("label",{className:"d-block",children:[Object(f.jsx)("b",{children:c}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",value:null!==t&&void 0!==t?t:"",step:i.step,disabled:!s,onChange:function(e){r(e.target.value)},placeholder:n}),a&&Object(f.jsx)("small",{children:Object(f.jsx)("i",{children:a})})]})},pr=n.a.memo(dr),jr=a(168),br=a.n(jr),mr=a(475);function hr(e){var t=e.color,a=e.onChange,n=e.disabled,c=Object(r.useState)(!1),s=Object(d.a)(c,2),o=s[0],i=s[1],l=null!==t&&void 0!==t?t:"#000000";return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:br.a.swatch,onClick:function(){return i(!0)},children:[Object(f.jsx)("div",{className:br.a.color,style:{background:l}}),l.toUpperCase()]}),o&&Object(f.jsxs)("div",{className:br.a.popover,children:[Object(f.jsx)("div",{className:br.a.cover,onClick:function(){return i(!1)}}),Object(f.jsx)(mr.SketchPicker,{disabled:n,disableAlpha:!0,color:l,onChangeComplete:function(e){return a(e.hex)}})]})]})}var Or=["value","error","onChange","default","label","isEnabled"],fr=function(e){var t=e.value,a=e.error,r=e.onChange,n=e.default,c=e.label,s=e.isEnabled,i=Object(Ie.a)(e,Or);return i.options?Object(f.jsx)(sr,Object(o.a)({value:t,error:a,onChange:r,default:n,label:c},i)):Object(f.jsxs)("label",{className:i.className+" row",children:[Object(f.jsx)(C.a,{xs:6,className:"d-flex align-items-center",children:c}),Object(f.jsx)(C.a,{xs:6,children:Object(f.jsx)(hr,{disabled:!s,color:t,onChange:r})}),a&&Object(f.jsx)("small",{children:Object(f.jsx)("i",{children:a})})]})},gr=n.a.memo(fr),vr=a(39),xr=a.n(vr),wr=function(e){var t,a=e.label,r=e.scale,n=e.numSamples,c=void 0===n?150:n;return t=r.ticks?r.ticks(c):r.domain?r.domain():[],Object(f.jsxs)("div",{className:xr.a["scheme-preview"],children:[a&&Object(f.jsx)("div",{style:{marginBottom:2},children:qa()(ye,a,a)}),Object(f.jsx)("div",{className:"d-flex",children:t.map((function(e){return Object(f.jsx)("div",{style:{flex:1,height:10,background:r(e)}},"sample-"+e)}))})]})},yr=n.a.memo(wr),Cr=function(e){var t=e.interpolators,a=e.interpolator,r=e.setInterpolator,n=e.colorDataset,c=e.colorDataType,s=e.scaleType,o=e.currentFinalScale;return Object(f.jsxs)(it.a,{className:"d-inline-block raw-dropdown w-100",children:[Object(f.jsx)(it.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!c,children:o&&Object(f.jsx)(yr,{scale:o})}),c&&Object(f.jsx)(it.a.Menu,{className:"w-100",children:t.map((function(e){return Object(f.jsx)(it.a.Item,{onClick:function(){return r(e)},className:xr.a["color-scheme-dropdown-item"],children:n[0]&&p.colorPresets[s][a]&&Object(f.jsx)(yr,{scale:Object(p.getPresetScale)(s,Object(p.getColorDomain)(n,c,s),e),label:e})},e)}))})]})},kr=n.a.memo(Cr);function Nr(e){var t=e.resetScale;return Object(f.jsx)(Ve.a,{placement:"bottom",overlay:Object(f.jsx)(Da.a,{id:"tooltip-top",children:"Reset domain"}),children:Object(f.jsx)("span",{type:"button",className:"btn",onClick:t,children:Object(f.jsx)(A.a,{width:"16",height:"16"})})},"bottom")}function _r(e){var t=e.invertScale;return Object(f.jsx)(Ve.a,{placement:"bottom",overlay:Object(f.jsx)(Da.a,{id:"tooltip-top",children:"Invert"}),children:Object(f.jsx)("span",{type:"button",className:"btn",onClick:t,children:Object(f.jsx)(A.b,{width:"16",height:"16"})})},"bottom")}function Sr(e){var t=e.handleChangeLocked,a=e.locked;return Object(f.jsx)(Ve.a,{placement:"bottom",overlay:Object(f.jsxs)(Da.a,{id:"tooltip-top",children:[a?"Unlock":"Lock"," scale"]}),children:Object(f.jsx)("span",{type:"button",className:"btn ".concat(a?"Xbtn-primary":""),onClick:function(){return t(!a)},children:a?Object(f.jsx)(A.r,{width:"16",height:"16"}):Object(f.jsx)(A.n,{width:"16",height:"16"})})},"bottom")}var Dr=a(476),Lr=a.n(Dr);function Rr(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current}var Tr=["value","error","onChange","defaultValue","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataset","colorDataType","hasAnyMapping"];function Ar(e){return 0===e.userDomain?0:e.userDomain?"date"===Object(p.getValueType)(e.userDomain)?e.userDomain.toISOString().substring(0,10):e.userDomain:""}var Fr=function(e){var t=e.value,a=(e.error,e.onChange),n=e.defaultValue,c=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue),s=e.colorDataset,i=e.colorDataType,l=e.hasAnyMapping,u=Object(Ie.a)(e,Tr),j=Object(r.useRef)(!!t.__loaded),b=Object(r.useState)(qa()(t,"scaleType")),m=Object(d.a)(b,2),h=m[0],O=m[1],g=Object(r.useMemo)((function(){var e=qa()(n,"defaultColor","#cccccc");return qa()(t,"defaultColor",e)}),[n,t]),v=Object(r.useState)(qa()(t,"locked")),x=Object(d.a)(v,2),w=x[0],k=x[1],N=Object(r.useMemo)((function(){return Object(p.getAvailableScaleTypes)(i,s)}),[i,s]),_=Object(r.useState)(qa()(t,"scaleType")?Object.keys(p.colorPresets[qa()(t,"scaleType")]):[]),S=Object(d.a)(_,2),D=S[0],L=S[1],R=Object(r.useState)(qa()(t,"interpolator")),T=Object(d.a)(R,2),A=T[0],F=T[1],P=Object(r.useState)(qa()(t,"userScaleValues",[]).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{userDomain:e.domain,userRange:e.range})}))),M=Object(d.a)(P,2),E=M[0],U=M[1],I=Object(r.useCallback)((function(e,t,a,r){if(t&&e&&p.colorPresets[t][e]&&a&&a.length&&a.map((function(e){return e.domain})).filter((function(e){return void 0!==e})).length)return Object(p.getColorScale)(s,i,t,e,a)}),[i,s]),q=Object(r.useCallback)((function(e,t){if(!s.length||!i||!t)return[];if(!p.colorPresets[t][e])return[];var a=Object(p.getColorDomain)(s,i,t);return Object(p.getInitialScaleValues)(a,t,e).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{userRange:e.range,userDomain:e.domain})}))}),[i,s]),B=Object(r.useCallback)((function(e){return e.map((function(e){var t;return{range:e.userRange,domain:"date"===i?null===(t=e.userDomain)||void 0===t?void 0:t.toString():e.userDomain}}))}),[i]),V=Object(r.useMemo)((function(){if(h&&A){var e=E&&E.length?E:q(A,h),t=B(e);return I(A,h,t)}return Object(p.getDefaultColorScale)()}),[I,q,B,A,h,E]),z=Object(r.useCallback)((function(e){var t=B(e);a({scaleType:h,interpolator:A,userScaleValues:t,defaultColor:g,locked:w})}),[B,h,A,g,w,a]),G=Object(r.useCallback)((function(e,t){var a=Object(Ue.a)(E);a[e].userRange=t,U(a),z(a)}),[z,E]),W=Object(r.useCallback)((function(e,t){var a=Object(Ue.a)(E);a[e].userDomain=t,U(a),z(a)}),[z,E]),H=Object(r.useCallback)((function(e){O(e);var t=p.colorPresets[e]?Object.keys(p.colorPresets[e]):[];L(t);var r=t[0];F(r);var n=q(r,e);U(n);var c=B(n);a({scaleType:e,interpolator:r,userScaleValues:c,defaultColor:g,locked:w})}),[q,B,g,a,w]),J=Object(r.useCallback)((function(e,t){F(e);var r=q(e,h);U(r);var n=B(r);if(t){var c=Lr()(t,"domain");n=n.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{range:c[e.domain.toString()]?c[e.domain.toString()].userRange:e.range})}))}a({scaleType:h,interpolator:e,userScaleValues:n,defaultColor:g,locked:w})}),[q,B,a,h,g,w]),K=Object(r.useCallback)((function(e){k(e),j.current=!0,a({scaleType:h,interpolator:A,userScaleValues:E,defaultColor:g,locked:e})}),[h,A,E,g,a]),Y=Object(r.useCallback)((function(){J(A,E)}),[J,A,E]),X=Object(r.useCallback)((function(){var e=Object(Ue.a)(E);e.reverse();var t=E.map((function(t,a){return Object(o.a)(Object(o.a)({},t),{},{userRange:e[a].userRange,range:e[a].range})}));U(t),z(t)}),[z,E]),Q=Rr(c);return Object(r.useEffect)((function(){Q&&c!==Q&&(j.current=!1)}),[c,Q]),Object(r.useEffect)((function(){if(!j.current&&!w){var e=N[0];H(e)}}),[N,H,w]),l?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(y.a,{className:u.className,style:{marginTop:"8px",marginBottom:"8px"},children:[Object(f.jsx)(C.a,{xs:5,className:"d-flex align-items-center nowrap",children:"Color scale"}),Object(f.jsx)(C.a,{xs:7,children:Object(f.jsxs)(it.a,{className:"d-inline-block raw-dropdown w-100",children:[Object(f.jsx)(it.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!i,children:qa()(we,h,h)}),Object(f.jsx)(it.a.Menu,{className:"w-100",children:N.map((function(e){return Object(f.jsx)(it.a.Item,{onClick:function(){return H(e)},children:qa()(we,e,e)},e)}))})]})})]}),Object(f.jsxs)(y.a,{className:[u.className].join(" "),style:{marginTop:"8px",marginBottom:"8px"},children:[Object(f.jsx)(C.a,{xs:5,className:"d-flex align-items-center nowrap",children:"Color scheme"}),Object(f.jsx)(C.a,{xs:7,children:Object(f.jsx)(kr,{interpolators:D,interpolator:A,setInterpolator:J,colorDataset:s,colorDataType:i,scaleType:h,currentFinalScale:V})})]}),i&&E&&Object(f.jsxs)("div",{className:xr.a["color-swatches-list"],children:[E.map((function(e,t){return Object(f.jsx)(y.a,{className:[xr.a["chart-option"],xr.a["color-swatch"],"ordinal"!==h?xr.a["not-ordinal"]:xr.a.ordinal].join(" "),children:Object(f.jsx)(C.a,{xs:12,children:Object(f.jsxs)("div",{className:xr.a["color-scale-item"],children:["ordinal"===h&&void 0!==qa()(e,"domain")&&Object(f.jsx)("span",{className:"nowrap text-truncate pr-2",title:e.domain&&e.domain.toString(),children:""===e.domain?"[empty string]":e.domain.toString()}),"ordinal"!==h&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"nowrap",children:0===t?"Start":t===E.length-1?"End":"Middle"}),Object(f.jsx)("input",{disabled:w,type:Object(p.getValueType)(e.userDomain),className:"form-control text-field",value:Ar(e),onChange:function(e){W(t,"date"===i?new Date(e.target.value):e.target.value)}})]}),Object(f.jsx)(hr,{color:e.userRange,onChange:function(e){G(t,e)}})]})})},t)})),Object(f.jsx)(y.a,{children:Object(f.jsxs)(C.a,{className:"d-flex justify-content-end",children:[Object(f.jsx)(Nr,{resetScale:Y}),Object(f.jsx)(_r,{invertScale:X}),"ordinal"!==h&&Object(f.jsx)(Sr,{locked:w,handleChangeLocked:K})]})})]})]}):null},Pr=["value","error","onChange","default","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataType","colorDataset"],Mr=function(e){var t=e.value,a=(e.error,e.onChange),n=e.default,c=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue,e.colorDataType,e.colorDataset,Object(Ie.a)(e,Pr),Object(r.useMemo)((function(){var e=qa()(n,"defaultColor","#cccccc");return qa()(t,"defaultColor",e)}),[n,t])),s=Object(r.useState)(c),i=Object(d.a)(s,2),l=i[0],u=i[1],p=Object(r.useCallback)((function(e){u(e);var r=Object(o.a)(Object(o.a)({},t),{},{defaultColor:e});a(r)}),[t,a]);return Object(r.useEffect)((function(){n&&n.defaultColor!==l&&p(n.defaultColor)}),[l,n,p]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("label",{className:[xr.a["chart-option"],"row"].join(" "),children:[Object(f.jsx)(C.a,{xs:6,className:"d-flex align-items-center",children:"Default"}),Object(f.jsx)(C.a,{xs:6,children:Object(f.jsx)(hr,{color:l,onChange:p})})]})})},Er=function(e){var t=e.value,a=e.onChange,n=e.default,c=e.mappingValue,s=e.colorDataType,o=e.colorDataset,i=Object(r.useMemo)((function(){return o&&o.length>0}),[o]);return Object(f.jsxs)(f.Fragment,{children:[!i&&Object(f.jsx)(Mr,{onChange:a,defaultValue:n,value:t}),i&&Object(f.jsx)(Fr,{hasAnyMapping:i,mappingValue:c,defaultValue:n,value:t,colorDataType:s,colorDataset:o,onChange:a})]})},Ur=a(1031),Ir=function(e){var t=e.optionId,a=e.label,r=e.value,n=e.error,c=e.onChange,s=e.className,o=e.isEnabled;return Object(f.jsxs)(y.a,{className:s,children:[Object(f.jsx)(C.a,{xs:6,className:"d-flex align-items-center nowrap",children:a}),Object(f.jsx)(Ur.a,{className:"col-6 d-flex align-items-center",children:Object(f.jsx)(Ur.a.Check,{type:"switch",checked:!!r,disabled:!o,onChange:function(e){c(e.target.checked)},id:t,label:r?"Yes":"No"})}),n&&Object(f.jsx)("div",{className:"col-12",children:Object(f.jsx)("small",{children:Object(f.jsx)("i",{children:n})})})]})},qr=n.a.memo(Ir),Br=a(314),Vr=a.n(Br),zr=["type","optionId","setVisualOptions","label","repeatIndex"],Gr={number:lr,text:pr,color:gr,colorScale:Er,boolean:qr};function Wr(e,t,a){var r=qa()(e[t],"value[".concat(a,"]"));return Object(o.a)(Object(o.a)({},e),{},Object(Te.a)({},t,Object(o.a)(Object(o.a)({},e[t]),{},{value:[r]})))}function Hr(e,t,a){return Array.isArray(e)?e.map((function(e){var r=qa()(e[t],"[".concat(a,"]"));return Object(o.a)(Object(o.a)({},e),{},Object(Te.a)({},t,r))})):e}function Jr(e,t){return Array.isArray(e.repeatDefault)?qa()(e.repeatDefault,"[".concat(t,"]"),e.default):e.default}function Kr(e){var t=e.type,a=e.optionId,c=e.setVisualOptions,s=e.label,i=e.repeatIndex,l=Object(Ie.a)(e,zr),u=Gr[t],d=Object(r.useMemo)((function(){return"colorScale"!==t?null:Object.keys(Vr()(l.visualOptions,a)).map((function(e){return JSON.stringify(qa()(l.visualOptions,e,""))})).join("-")}),[t,l.visualOptions,a]),j=Object(r.useMemo)((function(){if("colorScale"!==t)return null;if(!l.domain||!l.chart[l.domain])return null;try{return l.chart[l.domain](l.mappedData,l.mapping,l.visualOptions)}catch(e){return null}}),[t,l.chart,l.domain,l.mappedData,l.mapping,d]),b=Object(r.useMemo)((function(){return"colorScale"!==t?null:j?"__custom__":qa()(l.mapping,"[".concat(l.dimension,"].value"))}),[j,l.dimension,l.mapping,t]),m=Object(r.useMemo)((function(){return"colorScale"!==t?null:j?j.type:l.dataTypes[b]?Object(p.getTypeName)(l.dataTypes[b]):"string"}),[t,l.dataTypes,j,b]),h=Object(r.useMemo)((function(){return"colorScale"!==t?null:j?j.domain:l.mappedData?l.mappedData.map((function(e){return qa()(e,l.dimension)})).filter((function(e){return void 0!==e&&!(Array.isArray(e)&&!e.length)})):[]}),[t,l.dimension,j,l.mappedData]),O=Object(r.useCallback)((function(e){c((function(t){var r=e;return void 0!==i&&((r=t[a]||[])[i]=e),Object(o.a)(Object(o.a)({},t),{},Object(Te.a)({},a,r))}))}),[a,i,c]);return Object(f.jsx)(u,Object(o.a)(Object(o.a)({type:t,domainFromChart:j,mappingValue:b,colorDataType:m,colorDataset:h,optionId:a,label:void 0!==i?Object(f.jsxs)(n.a.Fragment,{children:[s," (",i+1,")"]}):s},Vr()(l,["mapping","visualOptions","chart","dataset","dataTypes","mappedData"])),{},{onChange:O}))}var Yr=function(e){var t=e.chart,a=e.dataset,n=e.mapping,c=e.dataTypes,s=e.visualOptions,i=e.setVisualOptions,l=e.error,u=e.mappedData,j=Object(r.useMemo)((function(){return Object(p.getOptionsConfig)(null===t||void 0===t?void 0:t.visualOptions)}),[t]),b=Object(r.useState)((function(){var e={};for(var t in j){var a=j[t].group;e.hasOwnProperty(a)||(e[a]=!0)}return e})),m=Object(d.a)(b,2),h=m[0],O=m[1],g=Object(r.useMemo)((function(){return Object(p.getEnabledOptions)(j,s,n)}),[j,s,n]),v=Object(r.useMemo)((function(){var e={};for(var t in j){var a=j[t].group;e.hasOwnProperty(a)||(e[a]="artboard"!==a)}return O(e),Object.keys(j).reduce((function(e,t){var a=j[t],r=(null===a||void 0===a?void 0:a.group)||"";return e[r]||(e[r]={}),e[r][t]=a,e}),{})}),[j]),x=Object(r.useMemo)((function(){var e=Object(p.getDefaultOptionsValues)(j,n),t=Object(o.a)(Object(o.a)({},e),s);return Object(p.getContainerOptions)(j,t)}),[n,j,s]);return Object(f.jsx)("div",{className:[xr.a["chart-options"],"col-4","col-xl-3"].join(" "),children:wa()(v,(function(e,r){return Object(f.jsxs)("div",{groupname:r,className:[xr.a["options-group"],h[r]?xr.a.collapsed:""].join(" "),children:[Object(f.jsx)(y.a,{className:"sticky-top",children:Object(f.jsxs)(C.a,{className:"d-flex justify-content-between align-items-center ".concat(xr.a["group-header"]),children:[Object(f.jsx)("h5",{className:"text-uppercase m-0",children:r}),Object(f.jsx)("span",{className:[xr.a["collapse-button"],"cursor-pointer"].join(" "),onClick:function(){return O(Object(o.a)(Object(o.a)({},h),{},Object(Te.a)({},r,!h[r])))}})]})}),wa()(e,(function(e,r){var d;return e.repeatFor?qa()(n,"[".concat(e.repeatFor,"].value"),[]).map((function(d,p){var j,b,m;return Object(f.jsx)(Kr,Object(o.a)(Object(o.a)({className:xr.a["chart-option"],repeatIndex:p},e),{},{optionId:r,error:null===l||void 0===l||null===(j=l.errors)||void 0===j?void 0:j[r+p],value:null!==(b=null===s||void 0===s||null===(m=s[r])||void 0===m?void 0:m[p])&&void 0!==b?b:Jr(e,p),mapping:"colorScale"===e.type?Wr(n,e.repeatFor,p):void 0,chart:"colorScale"===e.type?t:void 0,dataset:"colorScale"===e.type?a:void 0,dataTypes:"colorScale"===e.type?c:void 0,visualOptions:"colorScale"===e.type?s:void 0,mappedData:Hr(u,e.repeatFor,p),setVisualOptions:i,isEnabled:g[r]}),r+p)})):Object(f.jsx)(Kr,Object(o.a)(Object(o.a)({className:xr.a["chart-option"]},e),{},{optionId:r,error:null===l||void 0===l||null===(d=l.errors)||void 0===d?void 0:d[r],value:null===s||void 0===s?void 0:s[r],mapping:"colorScale"===e.type?n:void 0,chart:"colorScale"===e.type?t:void 0,dataset:"colorScale"===e.type?a:void 0,dataTypes:"colorScale"===e.type?c:void 0,visualOptions:"colorScale"===e.type?s:void 0,mappedData:u,setVisualOptions:i,isEnabled:g[r]}),r)})),"artboard"===r&&s.showLegend&&Object(f.jsxs)("p",{className:"small",children:["The final output will be ",null===x||void 0===x?void 0:x.width,"px *"," ",null===x||void 0===x?void 0:x.height,"px including the legend."]})]},r)}))})};var Xr=null;var Qr=function(e){var t=e.chart,a=e.dataset,n=e.dataTypes,c=e.mapping,s=e.visualOptions,o=e.error,i=e.setError,l=e.setRawViz,u=e.mappedData,j=Object(r.useRef)(null),b=function(e,t){var a=Object(r.useState)(e),n=Object(d.a)(a,2),c=n[0],s=n[1];return Object(r.useEffect)((function(){var a=setTimeout((function(){s(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c}(s,200);return Object(r.useEffect)((function(){i(null);var e=[];for(var r in c)c[r].ids&&c[r].ids.length>0&&e.push(r);var s=t.dimensions.filter((function(t){return t.required&&-1===e.indexOf(t.id)}));if(s.length>0){var o=Object(f.jsxs)("span",{children:["Required chart variables: you need to map"," ",s.map((function(e,t){return Object(f.jsx)("span",{className:"font-weight-bold",children:e.name},t)})).reduce((function(e,t){return[e," and ",t]}))]});for(i({variant:"secondary",message:o}),l(null);j.current.firstChild;)j.current.removeChild(j.current.firstChild)}else{var d=t.dimensions.filter((function(e){return e.multiple&&e.required&&e.minValues&&c[e.id].ids.length<e.minValues}));if(d.length>0){var m=Object(f.jsxs)("span",{children:["Please map"," ",d.map((function(e){return Object(f.jsxs)(f.Fragment,{children:["at least ",Object(f.jsx)("span",{className:"font-weight-bold",children:e.minValues})," ","dimensions on ",Object(f.jsx)("span",{className:"font-weight-bold",children:e.name})]})})).reduce((function(e,t){return[e," and ",t]})),"."]});for(i({variant:"secondary",message:m}),l(null);j.current.firstChild;)j.current.removeChild(j.current.firstChild)}else{var h,O=function(e){if(c[e].ids&&c[e].ids.length>0&&!c[e].isValid){var a=t.dimensions.find((function(t){return t.id===e})),r="Data-type mismatch: you can\u2019t map ".concat(c[e].mappedType,"s on ").concat(a.name,".");for(i({variant:"danger",message:r}),l(null);j.current.firstChild;)j.current.removeChild(j.current.firstChild);return{v:void 0}}};for(var g in c){var v=O(g);if("object"===typeof v)return v.v}if(u)try{var x=Object(p.chart)(t,{data:a,mapping:c,dataTypes:n,visualOptions:b});try{var w=x.renderToDOM(j.current,u);l(w),i(null),h=t.metadata,Xr!==h.id&&(Xr=h.id,"function"===typeof window.gtag&&window.gtag("event","chart-render",{event_category:h.id}))}catch(y){console.log("chart error",y),i({variant:"danger",message:"Chart error. "+y.message}),l(null)}}catch(y){for(;j.current.firstChild;)j.current.removeChild(j.current.firstChild);console.log({e:y}),i({variant:"danger",message:"Chart error. "+y.message}),l(null)}else for(l(null);j.current.firstChild;)j.current.removeChild(j.current.firstChild)}}}),[i,b,l,u,t,c]),Object(f.jsx)("div",{className:"col-8 col-xl-9",children:Object(f.jsxs)("div",{className:["overflow-auto","position-sticky"].join(" "),style:{top:"calc(15px + var(--header-height))"},children:[o&&Object(f.jsx)(ra,{variant:o.variant,message:o.message}),Object(f.jsx)("div",{ref:j})]})})},Zr=n.a.memo(Qr),$r=function(e){var t=e.chart,a=e.dataset,n=e.dataTypes,c=e.mapping,s=e.visualOptions,o=e.setVisualOptions,i=e.setRawViz,l=e.setMappingLoading,u=Object(r.useState)({variant:"secondary",message:"Required chart variables"}),p=Object(d.a)(u,2),j=p[0],b=p[1],m=Object(r.useState)(null),h=Object(d.a)(m,2),O=h[0],g=h[1];return Object(r.useEffect)((function(){try{l(!0),function(e,t,a){var r=t.data,n=t.mapping,c=t.visualOptions,s=t.dataTypes;return P||(P=new ke),Ce.a(P).mapData(e,{data:r,mapping:n,visualOptions:c,dataTypes:s},a)}(t.metadata.name,{data:a,mapping:c,dataTypes:n},t.rawCustomChart).then((function(e){l(!1),g(e)})).catch((function(e){console.error(e),l(!1),g(null)}))}catch(e){console.error(e),l(!1),g(null)}}),[t,c,n,b,i,l,a]),Object(f.jsxs)(y.a,{children:[Object(f.jsx)(Yr,{chart:t,dataset:a,mapping:c,dataTypes:n,visualOptions:s,setVisualOptions:o,error:j,mappedData:O}),Object(f.jsx)(Zr,{chart:t,dataset:a,dataTypes:n,mapping:c,visualOptions:s,error:j,setError:b,setRawViz:i,mappedData:O})]})},en=a(1027),tn=a(1028);function an(e,t){var a=document.createElement("a");return a.href=e,a.download=t||"download",a.click(),a}function rn(e){var t=e.rawViz,a=e.exportProject,n=Object(r.useCallback)((function(e){var a=(new XMLSerializer).serializeToString(t._node.firstChild),r=window.URL||window.webkitURL||window,n=new Blob([a],{type:"image/svg+xml;charset=utf-8"});an(r.createObjectURL(n),e),r.revokeObjectURL(n)}),[t]),c=Object(r.useCallback)((function(e,a){var r=(new XMLSerializer).serializeToString(t._node.firstChild),n=window.URL||window.webkitURL||window,c=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),s=n.createObjectURL(c),o=document.createElement("canvas");o.height=t._node.firstChild.clientHeight,o.width=t._node.firstChild.clientWidth;var i=o.getContext("2d"),l=new Image;l.onload=function(){i.drawImage(l,0,0),an(o.toDataURL(e),a),n.revokeObjectURL(c)},l.src=s}),[t]),s=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var r,n,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:r=e.sent,n=JSON.stringify(r),c=new Blob([n],{type:"application/json"}),s=window.URL||window.webkitURL||window,an(o=s.createObjectURL(c),t),s.revokeObjectURL(o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),o=Object(r.useState)("svg"),i=Object(d.a)(o,2),p=i[0],j=i[1],b=Object(r.useState)("viz"),m=Object(d.a)(b,2),h=m[0],O=m[1],g=Object(r.useCallback)((function(){switch(p){case"svg":n("".concat(h,".svg"));break;case"png":c("image/png","".concat(h,".png"));break;case"jpg":c("image/jpeg","".concat(h,".jpg"));break;case"rawgraphs":s("".concat(h,".rawgraphs"))}var e,a;e=t._chartImplementation.metadata,a=p,"function"===typeof window.gtag&&window.gtag("event","chart-export",{event_category:e.id,event_label:a})}),[h,p,c,s,n,t]);return Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col col-sm-3",children:Object(f.jsxs)(en.a,{className:"mb-3 raw-input-group",children:[Object(f.jsx)("input",{type:"text",className:"form-control text-field",value:h,onChange:function(e){return O(e.target.value)}}),Object(f.jsx)(tn.a,{as:en.a.Append,title:".".concat(p),id:"input-group-dropdown-1",className:"raw-dropdown",children:["svg","png","jpg","rawgraphs"].map((function(e){return Object(f.jsxs)(it.a.Item,{onClick:function(){return j(e)},children:[".",e]},e)}))})]})}),Object(f.jsx)("div",{className:"col col-sm-2",children:Object(f.jsx)("button",{className:"btn btn-primary btn-block raw-btn",onClick:g,children:"Download"})})]})}var nn=a(225),cn=a.n(nn),sn=a(14),on=a(31),ln=a(32),un=a(50),dn=a(477),pn=a(478),jn=a.n(pn),bn=a(315),mn=a.n(bn),hn="https://cdn.jsdelivr.net/npm/",On=[],fn=new mn.a(50),gn=new mn.a(400),vn={d3:_e,"@rawgraphs/rawgraphs-core":p};function xn(e){return wn.apply(this,arguments)}function wn(){return(wn=Object(u.a)(l.a.mark((function e(t){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vn[t]){e.next=2;break}return e.abrupt("return",vn[t]);case 2:try{a=new URL(t)}catch(c){a=new URL("".concat(hn).concat(t))}if(r=a.toString(),!gn.has(r)){e.next=6;break}return e.abrupt("return",gn.get(r));case 6:return e.next=8,Nn(r.toString());case 8:return(n=e.sent)&&gn.set(r,n),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r,n;t.length<2?(r=t[0],n=[]):(t.length>=3&&(t=t.slice(1)),n=t[0],r=t[1]);var c={},s={exports:c},o=n.map((function(e){return"exports"===e?Promise.resolve(c):"module"===e?Promise.resolve(s):xn(e)}));On.push(Promise.all(o).then((function(e){var t=r.apply(void 0,Object(Ue.a)(e));return n.includes("exports")||n.includes("module")||!t?c:t})))}function Cn(e){if(vn[e])return vn[e];var t;try{t=new URL(e)}catch(n){t=new URL("".concat(hn).concat(e))}var a=t.toString();if(gn.has(a))return gn.get(a);var r=Ln(a.toString());return r&&gn.set(a,r),r}function kn(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r,n;t.length<2?(r=t[0],n=[]):(t.length>=3&&(t=t.slice(1)),n=t[0],r=t[1]);var c={},s={exports:c},o=n.map((function(e){return"exports"===e?c:"module"===e?s:Cn(e)})),i=r.apply(void 0,Object(Ue.a)(o));n.includes("exports")||n.includes("module")||!i?On.push(c):On.push(i)}function Nn(e){return new Promise((function(t,a){window.define=yn;var r=document.createElement("script");r.src=e,r.async=!0,r.addEventListener("load",(function(){var n=On.pop();if(n)return n.then((function(){r.remove(),t(n)})).catch((function(e){r.remove(),a(e)}));a("Problem during the execution of ".concat(e))}),{once:!0}),r.addEventListener("error",(function(){r.remove(),a("Cannot import url ".concat(e))}),{once:!0}),document.head.append(r)}))}function _n(e){return"object"===typeof e&&null!==e&&("function"===typeof e.render&&"string"===typeof e.metadata.id)}function Sn(e){return Dn.apply(this,arguments)}function Dn(){return(Dn=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fn.get(t)){e.next=2;break}return e.abrupt("return",Promise.resolve(fn.get(t)));case 2:return e.next=4,Nn(t);case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:return(r=Object.values(a).filter(_n)).length>0&&fn.set(t,r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e){return self.define=kn,self.importScripts(e),On.pop()}yn.amd={},kn.amd={};a(426);var Rn="rawCustomCharts";function Tn(e,t){var a=t.map((function(e){return e.metadata.id})),r=[];return[e.filter((function(e){var t=a.includes(e.metadata.id);return t&&r.push(e),!t})).concat(t),r]}function An(e){return Fn.apply(this,arguments)}function Fn(){return(Fn=Object(u.a)(l.a.mark((function e(t){var a,r,n,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return{id:e.metadata.id,source:e.rawCustomChart.source}})),localStorage.setItem(Rn,JSON.stringify(a)),e.next=4,window.caches.open(Rn);case 4:return r=e.sent,n=a.map((function(e){return 0===e.source.indexOf("file:")?e.source.replace("file:",""):null})).filter(Boolean),e.next=8,r.keys();case 8:return c=e.sent,s=c.map((function(e){return e.url.split("/").slice(-1)[0]})),o=jn()(s,n),e.next=13,Promise.all(o.map((function(e){return r.delete("/"+e)})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pn(e){return new Promise((function(t){var a=new FileReader;a.onload=function(e){t(Object(dn.sha3_512)(e.target.result))},a.readAsArrayBuffer(e)}))}function Mn(){return En.apply(this,arguments)}function En(){return(En=Object(u.a)(l.a.mark((function e(){var t,a,r,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(null!==(t=localStorage.getItem(Rn))&&void 0!==t?t:"[]"),e.next=3,window.caches.open(Rn);case 3:return r=e.sent,e.next=6,Promise.all(ma()(a.map((function(e){return e.source}))).map((function(e){return 0===e.indexOf("file:")?r.match("/"+e.replace("file:","")).then((function(t){return t?t.blob().then((function(t){return{source:e,url:URL.createObjectURL(t)}})):Promise.resolve(null)})):0===e.indexOf("url:")?Promise.resolve({source:e,url:e.replace("url:","")}):0===e.indexOf("npm:")?Promise.resolve({source:e,url:hn+e.replace("npm:","")}):Promise.resolve(null)}))).then((function(e){return e.filter(Boolean)}));case 6:return n=e.sent,e.next=9,Promise.all(n.map((function(e){return Sn(e.url).then((function(t){return t.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{rawCustomChart:e})}))}))}))).then((function(e){return e.reduce((function(e,t){return t.forEach((function(t){e[t.metadata.id]=t})),e}),{})}));case 9:return c=e.sent,e.abrupt("return",a.map((function(e){return c[e.id]})).filter(Boolean));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Un(e){return In.apply(this,arguments)}function In(){return(In=Object(u.a)(l.a.mark((function e(t){var a,r,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.rawCustomChart){e.next=2;break}return e.abrupt("return",null);case 2:if(0!==(a=t.rawCustomChart.source).indexOf("file:")){e.next=17;break}return e.next=6,window.caches.open(Rn);case 6:return r=e.sent,n=a.replace("file:",""),e.next=10,r.match("/".concat(n));case 10:if(c=e.sent){e.next=13;break}throw new Error("File not found: ".concat(n));case 13:return e.next=15,c.text();case 15:return s=e.sent,e.abrupt("return",{source:a,content:s});case 17:return e.abrupt("return",{source:a});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qn=["uploadCustomCharts","loadCustomChartsFromNpm","loadCustomChartsFromUrl","importCustomChartFromProject"],Bn=["localhost"];function Vn(e){return!!Bn.includes(e.hostname)}var zn=function(e){Object(on.a)(a,e);var t=Object(ln.a)(a);function a(){var e;Object(sn.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).isAbortByUser=!0,e}return a}(Object(un.a)(Error));function Gn(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{storage:!0}).storage,t=void 0===e||e,a=Object(r.useState)([]),n=Object(d.a)(a,2),c=n[0],s=n[1];Object(r.useEffect)((function(){t&&Mn().then(s)}),[t]);var i=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(a,r){var n,i,u,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(r);case 2:if(0!==(n=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(n=n.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{rawCustomChart:{source:a,url:r}})})),i=Tn(c,n),u=Object(d.a)(i,2),p=u[0],u[1].forEach((function(e){URL.revokeObjectURL(e.rawCustomChart.url)})),s(p),!t){e.next=12;break}return e.next=12,An(p);case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,t]),p=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="url:".concat(t),e.abrupt("return",i(a,t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),j=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="npm:".concat(t),r=hn+t,e.abrupt("return",i(a,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),b=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(a){var r,n,i,u,p,j,b,m,h,O=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O.length>1&&void 0!==O[1]?O[1]:"add",a){e.next=3;break}return e.abrupt("return",[]);case 3:return n=URL.createObjectURL(a),e.next=6,Sn(n);case 6:if(0!==(i=e.sent).length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,Pn(a);case 11:if(u=e.sent,p="file:".concat(u),i=i.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{rawCustomChart:{source:p,url:n}})})),j="replace"===r?[i,c]:Tn(c,i),b=Object(d.a)(j,2),m=b[0],b[1].forEach((function(e){URL.revokeObjectURL(e.rawCustomChart.url)})),s(m),!t){e.next=25;break}return e.next=20,window.caches.open(Rn);case 20:return h=e.sent,e.next=23,h.put(u,new Response(a));case 23:return e.next=25,An(m);case 25:return e.abrupt("return",m);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),m=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(a){var r,n,i,u,p,j,b,m,h,O,f,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.rawCustomChart,n=r.source,i=r.content,0!==n.indexOf("url:")){e.next=5;break}u=n.replace("url:",""),e.next=16;break;case 5:if(0!==n.indexOf("npm:")){e.next=9;break}u=hn+n.replace("npm:",""),e.next=16;break;case 9:if(0!==n.indexOf("file:")){e.next=15;break}j=n.replace("file:",""),p=new File([i],"".concat(j,".js"),{type:"application/json"}),u=URL.createObjectURL(p),e.next=16;break;case 15:throw new Error("Try to import invalid source ".concat(n));case 16:return e.next=18,Sn(u);case 18:if(b=e.sent,m=cn()(b,(function(e){return e.metadata.id===a.metadata.id}))){e.next=22;break}throw new Error("Can't find chart ".concat(a.metadata.id," from ").concat(n));case 22:if(m=Object(o.a)(Object(o.a)({},m),{},{rawCustomChart:{source:n,url:u}}),h=Tn(c,[m]),O=Object(d.a)(h,2),f=O[0],O[1].forEach((function(e){URL.revokeObjectURL(e.rawCustomChart.url)})),s(f),!t){e.next=35;break}if(!p){e.next=33;break}return e.next=30,window.caches.open(Rn);case 30:return g=e.sent,e.next=33,g.put(j,new Response(p));case 33:return e.next=35,An(f);case 35:return e.abrupt("return",m);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),h=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.filter((function(e){return e.metadata.id!==a.metadata.id})),s(r),!t){e.next=5;break}return e.next=5,An(r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]);return[c,{uploadCustomCharts:b,removeCustomChart:h,loadCustomChartsFromUrl:p,loadCustomChartsFromNpm:j,exportCustomChart:Un,importCustomChartFromProject:m}]}(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=n.uploadCustomCharts,s=n.loadCustomChartsFromNpm,i=n.loadCustomChartsFromUrl,p=n.importCustomChartFromProject,j=Object(Ie.a)(n,qn),b=Object(r.useState)(null),m=Object(d.a)(b,2),h=m[0],O=m[1],f=Object(r.useCallback)((function(e){var t;try{t=new URL(e)}catch(a){return Promise.resolve([])}return Vn(t)?i(String(t)):new Promise((function(e,a){O({type:"url",value:String(t),resolve:e,reject:a})}))}),[i]),g=Object(r.useCallback)((function(e){var t=e.trim();if(""!==t.trim())return new Promise((function(e,a){O({type:"npm",value:t,resolve:e,reject:a})}))}),[s]),v=Object(r.useCallback)((function(e){return new Promise((function(t,a){O({type:"file",value:e,resolve:t,reject:a})}))}),[]),x=Object(r.useCallback)((function(e){var t=e.rawCustomChart.source,a=!1;return 0===t.indexOf("url:")?Vn(new URL(t.replace("url:","")))||(a=!0):0===t.indexOf("npm:")?(t.replace("npm:",""),a=!0):0===t.indexOf("file:")&&(a=!0),a?new Promise((function(t,a){O({type:"project",value:e,resolve:t,reject:a})})):p(e)}),[p]),w=Object(r.useCallback)((function(){var e=h.type,t=h.value,a=h.resolve,r=h.reject;"file"===e?c(t).then(a,r):"url"===e?i(t).then(a,r):"npm"===e?s(t).then(a,r):"project"===e&&p(t).then(a,r),O(null)}),[h,p,s,i,c]),y=Object(r.useCallback)((function(){h&&h.reject(new zn),O(null)}),[h]);return[a,Object(o.a)({toConfirmCustomChart:h,abortCustomChartLoad:y,confirmCustomChartLoad:w,uploadCustomCharts:v,loadCustomChartsFromUrl:f,loadCustomChartsFromNpm:g,importCustomChartFromProject:x},j)]}var Wn=a(306),Hn=a.n(Wn),Jn=a(479),Kn=a.n(Jn),Yn=a(64),Xn=a.n(Yn),Qn=["isOpen","onClose"];function Zn(e){var t,a=e.loading,r=e.load;var n=Object(Gt.a)({disabled:a,onDrop:function(e){e.length&&r(e[0])},accept:"text/plain,text/javascript,.js",maxFiles:1}),c=n.getRootProps,s=n.getInputProps,i=n.isDragReject,l=n.isDragAccept;return Object(f.jsxs)("div",Object(o.a)(Object(o.a)({className:Ge()(Xn.a.dropzone,(t={},Object(Te.a)(t,Xn.a.reject,i),Object(Te.a)(t,Xn.a.accept,l),t))},c()),{},{children:[Object(f.jsx)("input",Object(o.a)({},s())),Object(f.jsx)("span",{children:"Drag a file here or "}),Object(f.jsx)(T.a,{className:Xn.a["browse-button"],color:"primary",children:"Browse"}),Object(f.jsx)("span",{children:"a file from your computer"}),Object(f.jsxs)("div",{className:Xn.a.dropin,children:[l&&Object(f.jsx)("p",{children:"All files will be accepted"}),i&&Object(f.jsx)("p",{children:"Some files will be rejected"})]})]}))}function $n(e){var t=e.load,a=e.loading,n=e.placeholder,c=Object(r.useState)(""),s=Object(d.a)(c,2),o=s[0],i=s[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(o)},children:[Object(f.jsx)("input",{disabled:a,className:"form-control mb-2",placeholder:n,type:"text",value:o,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)("button",{type:"submit",disabled:""===o.trim()||a,className:"btn btn-primary",onClick:function(){},children:"Load your chart"})})]})}function ec(e){var t=e.uploadCustomCharts,a=e.loadCustomChartsFromUrl,n=e.loadCustomChartsFromNpm,c=e.onClose,s=Object(r.useState)(!1),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(r.useState)(null),p=Object(d.a)(u,2),j=p[0],b=p[1],m=Object(r.useState)("file"),h=Object(d.a)(m,2),O=h[0],g=h[1];function v(e){l(!1),e.isAbortByUser||(console.log(e),b(e))}function x(e){b(null),g(e)}return Object(f.jsxs)("div",{className:"row",style:{minHeight:300},children:[Object(f.jsxs)("div",{className:"col-md-4",children:[Object(f.jsxs)("div",{onClick:function(){x("file")},className:Ge()("d-flex align-items-center cursor-pointer",Xn.a.loadingOption,Object(Te.a)({},Xn.a.active,"file"===O)),children:[Object(f.jsx)(A.s,{className:"w-25"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Load from file"})]}),Object(f.jsxs)("div",{onClick:function(){return x("url")},className:Ge()("d-flex align-items-center cursor-pointer",Xn.a.loadingOption,Object(Te.a)({},Xn.a.active,"url"===O)),children:[Object(f.jsx)(A.f,{className:"w-25"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Import from URL"})]}),Object(f.jsxs)("div",{onClick:function(){return x("npm")},className:Ge()("d-flex align-items-center cursor-pointer",Xn.a.loadingOption,Object(Te.a)({},Xn.a.active,"npm"===O)),children:[Object(f.jsx)(A.f,{className:"w-25"}),Object(f.jsx)("h4",{className:"m-0 d-inline-block",children:"Import from NPM"})]})]}),Object(f.jsxs)("div",{className:"col-md-8",children:["npm"===O&&Object(f.jsx)($n,{loading:i,load:function(e){b(null),l(!0),n(e).then(c,v)},placeholder:"Load UMD or AMD JS File from NPM"},"npm"),"url"===O&&Object(f.jsx)($n,{loading:i,load:function(e){b(null),l(!0),a(e).then(c,v)},placeholder:"Load UMD or AMD JS File from URL"},"url"),"file"===O&&Object(f.jsx)(Zn,{loading:i,load:function(e){b(null),l(!0),t(e).then(c,v)},placeholder:"Load UMD or AMD JS File from URL"},"url"),j&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:"Error during custom chart import"})]})]})}function tc(e){var t=e.isOpen,a=e.onClose,r=Object(Ie.a)(e,Qn);return Object(f.jsxs)(R.a,{show:t,onHide:a,backdrop:"static",centered:!0,size:"lg","aria-labelledby":"contained-modal-title-vcenter",className:"raw-modal",contentClassName:"bg-white",children:[Object(f.jsx)(R.a.Header,{closeButton:!0,children:Object(f.jsx)(R.a.Title,{children:"Load custom chart"})}),Object(f.jsx)(R.a.Body,{children:Object(f.jsx)(ec,Object(o.a)(Object(o.a)({},r),{},{onClose:a}))}),Object(f.jsx)(R.a.Footer,{children:Object(f.jsxs)("div",{className:"text-center w-100",children:["Do you want to know how to create a custom chart?"," ",Object(f.jsx)("a",{href:"https://rawgraphs.io",target:"_blank",rel:"noreferrer",children:"Check our documentation"})]})})]})}var ac=Object(r.memo)(tc);function rc(e){var t=e.toConfirmCustomChart,a=e.abortCustomChartLoad,r=e.confirmCustomChartLoad;return Object(f.jsxs)(R.a,{show:null!==t,onHide:function(){return a(null)},backdrop:"static",centered:!0,"aria-labelledby":"contained-modal-title-vcenter",className:"raw-modal",contentClassName:"border",children:[Object(f.jsx)(R.a.Header,{closeButton:!0,children:Object(f.jsx)(R.a.Title,{children:"Warning!"})}),Object(f.jsxs)(R.a.Body,{children:[Object(f.jsx)("p",{children:"You are about to execute third party JavaScript continue at your own risk."}),t&&"project"===t.type&&Object(f.jsx)("div",{title:t.value.rawCustomChart.source,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:t.value.rawCustomChart.source})]}),Object(f.jsxs)(R.a.Footer,{className:"d-flex justify-content-between",children:[Object(f.jsx)(T.a,{variant:"light",onClick:function(){a()},children:"Don't execute"}),Object(f.jsx)(T.a,{variant:"primary",onClick:function(){r()},children:"Continue"})]})]})}var nc=function(){var e=Gn(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=n.toConfirmCustomChart,s=n.confirmCustomChartLoad,i=n.abortCustomChartLoad,b=n.uploadCustomCharts,m=n.loadCustomChartsFromUrl,h=n.loadCustomChartsFromNpm,O=n.importCustomChartFromProject,v=n.removeCustomChart,x=n.exportCustomChart,w=Object(r.useMemo)((function(){return Yt.concat(a)}),[a]),y=Ee(),C=y.userInput,k=y.userData,_=y.userDataType,S=y.parseError,D=y.unstackedData,R=y.unstackedColumns,T=y.data,A=y.separator,F=y.thousandsSeparator,P=y.decimalsSeparator,E=y.locale,U=y.stackDimension,I=y.dataSource,q=y.loading,B=y.hydrateFromSavedProject,V=Object(r.useState)(w[0]),z=Object(d.a)(V,2),G=z[0],W=z[1],H=Object(r.useState)({}),J=Object(d.a)(H,2),K=J[0],Y=J[1],X=Object(r.useState)((function(){var e,t=Object(p.getOptionsConfig)(null===(e=w[0])||void 0===e?void 0:e.visualOptions);return Object(p.getDefaultOptionsValues)(t)})),Q=Object(d.a)(X,2),Z=Q[0],$=Q[1],ee=Object(r.useState)(null),te=Object(d.a)(ee,2),ae=te[0],re=te[1],ne=Object(r.useState)(!1),ce=Object(d.a)(ne,2),se=ce[0],oe=ce[1],ie=Object(r.useRef)(null),le=Object(r.useMemo)((function(){if(qa()(T,"dataTypes"))return Object.keys(T.dataTypes)}),[T]),ue=Rr(le),de=Object(r.useCallback)((function(){ie.current&&ie.current.clearLocalMapping()}),[]),pe=Object(r.useRef)();Object(r.useEffect)((function(){pe.current=me})),Object(r.useEffect)((function(){var e,t=new URLSearchParams(window.location.search).get("url");try{e=new URL(t)}catch(a){return}fetch(e).then((function(e){return e.ok?e.text():Promise.reject(e)})).then((function(e){var t=Object(p.deserializeProject)(e,Yt),a=pe.current;a&&a(t,!0)}),(function(t){console.log("Can't load ".concat(e),t)}))}),[]),Object(r.useEffect)((function(){ue&&(le?ue.join(".")!==le.join(".")&&(Y({}),de()):(Y({}),de()))}),[le,ue,de]),Object(r.useEffect)((function(){if(G.rawCustomChart){var e=cn()(a,(function(e){return e.metadata.id===G.metadata.id}));if(!e)return void W(Yt[0]);e.rawCustomChart.source!==G.rawCustomChart.source&&W(e)}}),[a,G]);var je=Object(r.useCallback)((function(e){Y({}),de(),W(e);var t=Object(p.getOptionsConfig)(null===e||void 0===e?void 0:e.visualOptions);$(Object(p.getDefaultOptionsValues)(t)),re(null)}),[de]),be=Object(r.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(G);case 2:return t=e.sent,e.abrupt("return",Object(p.serializeProject)({userInput:C,userData:k,userDataType:_,parseError:S,unstackedData:D,unstackedColumns:R,data:T,separator:A,thousandsSeparator:F,decimalsSeparator:P,locale:E,stackDimension:U,dataSource:I,currentChart:G,mapping:K,visualOptions:Z,customChart:t}));case 4:case"end":return e.stop()}}),e)}))),[G,T,I,P,E,K,S,A,U,F,k,_,C,Z,R,D,x]),me=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.currentChart.rawCustomChart){e.next=15;break}return e.prev=1,e.next=4,O(t.currentChart);case 4:r=e.sent,e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(1),!e.t0.isAbortByUser){e.next=12;break}return a&&window.history.replaceState(null,null,"/"),e.abrupt("return");case 12:throw e.t0;case 13:e.next=16;break;case 15:r=t.currentChart;case 16:B(t),W(r),Y(t.mapping),n=Object(o.a)({},t.visualOptions),Object.keys(n).forEach((function(e){Hn()(n[e])&&(n[e].__loaded=!0)})),$(t.visualOptions);case 22:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),[B,O]),he=Object(r.useState)(!1),Oe=Object(d.a)(he,2),fe=Oe[0],ge=Oe[1],ve=Object(r.useCallback)((function(){return ge((function(e){return!e}))}),[]);return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(g,{menuItems:j}),Object(f.jsx)(rc,{toConfirmCustomChart:c,confirmCustomChartLoad:s,abortCustomChartLoad:i}),Object(f.jsxs)("div",{className:"app-sections",children:[Object(f.jsx)(N,{title:"1. Load your data",loading:q,children:Object(f.jsx)(ja,Object(o.a)(Object(o.a)({},y),{},{hydrateFromProject:me}))}),T&&Object(f.jsxs)(N,{title:"2. Choose a chart",children:[Object(f.jsx)(ac,{isOpen:fe,onClose:ve,loadCustomChartsFromNpm:h,loadCustomChartsFromUrl:m,uploadCustomCharts:b}),Object(f.jsx)(va,{onAddChartClick:ve,onRemoveCustomChart:v,availableCharts:w,currentChart:G,setCurrentChart:je})]}),T&&G&&Object(f.jsx)(N,{title:"3. Mapping",loading:se,children:Object(f.jsx)(tr,{ref:ie,dimensions:G.dimensions,dataTypes:T.dataTypes,mapping:K,setMapping:Y})}),T&&G&&Object(f.jsx)(N,{title:"4. Customize",children:Object(f.jsx)($r,{chart:G,dataset:T.dataset,dataTypes:T.dataTypes,mapping:K,visualOptions:Z,setVisualOptions:$,setRawViz:re,setMappingLoading:oe})}),T&&G&&ae&&Object(f.jsx)(N,{title:"5. Export",children:Object(f.jsx)(rn,{rawViz:ae,exportProject:be})}),Object(f.jsx)(L,{}),Object(f.jsxs)(Kn.a,{location:"bottom",buttonText:"Got it!",style:{background:"#f5f5f5",color:"#646467"},buttonStyle:{background:"#646467",color:"white",fontSize:"13px",borderRadius:"3px",padding:"5px 20px"},buttonClasses:"btn btn-default btn-grey",acceptOnScroll:!0,children:["This website uses Google Analytics to anonymously collect browsing data."," ",Object(f.jsx)("a",{href:"https://rawgraphs.io/privacy/",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-body border-bottom border-dark",children:"Learn More"})]})]}),Object(f.jsx)(M,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(nc,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[962,1,2]]]);
//# sourceMappingURL=main.22bb7671.chunk.js.map